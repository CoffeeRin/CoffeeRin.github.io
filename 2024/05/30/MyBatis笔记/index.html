<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
        
      <meta name="description" content="一个废物的博客" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>MyBatis笔记 |  CoffeeLin</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/咖啡.svg" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="CoffeeLin" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-MyBatis笔记"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  MyBatis笔记
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2024/05/30/MyBatis%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2024-05-30T08:53:00.000Z" itemprop="datePublished">2024-05-30</time>
</a>   
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">10.6k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">49 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <p><strong>一、MyBatis简介</strong><br>1 、MyBatis历史<br>2 、MyBatis特性<br>3 、MyBatis下载<br>4 、和其它持久化层技术对比<br><strong>二、搭建MyBatis</strong><br>1 、开发环境<br>2 、创建maven工程<br>a&gt;打包方式：jar<br>b&gt;引入依赖<br>3 、创建MyBatis的核心配置文件<br>4 、创建mapper接口<br>5 、创建MyBatis的映射文件<br>6 、通过junit测试功能<br>7 、加入log4j日志功能<br>a&gt;加入依赖<br>b&gt;加入log4j的配置文件<br><strong>三、核心配置文件详解<br>四、MyBatis的增删改查<br>五、MyBatis获取参数值的两种方式（重点）</strong><br>1 、单个字面量类型的参数<br>2 、多个字面量类型的参数<br>3 、map集合类型的参数<br>4 、实体类类型的参数<br>5 、使用@Param标识参数<br><strong>六、MyBatis的各种查询功能</strong><br>1 、查询一个实体类对象<br>2 、查询一个list集合<br>3 、查询单个数据<br>4 、查询一条数据为map集合<br>5 、查询多条数据为map集合<br>方式一：<br>方式二：<br><strong>七、特殊SQL的执行</strong><br>1 、模糊查询<br>2 、批量删除<br>3 、动态设置表名<br>4 、添加功能获取自增的主键<br><strong>八、自定义映射resultMap</strong><br>1 、resultMap处理字段和属性的映射关系<br>2 、多对一映射处理<br>a&gt;级联方式处理映射关系<br>b&gt;使用association处理映射关系<br>c&gt;分步查询<br>3 、一对多映射处理<br>a&gt;collection<br>b&gt;分步查询<br><strong>九、动态SQL</strong><br>1 、if<br>2 、where<br>3 、trim<br>4 、choose、when、otherwise<br>5 、foreach<br>6 、SQL片段<br><strong>十、MyBatis的缓存</strong></p>
<p>1 、MyBatis的一级缓存<br>2 、MyBatis的二级缓存<br>3 、二级缓存的相关配置<br>4 、MyBatis缓存查询的顺序<br>5 、整合第三方缓存EHCache<br>a&gt;添加依赖<br>b&gt;各jar包功能<br>c&gt;创建EHCache的配置文件ehcache.xml<br>d&gt;设置二级缓存的类型<br>e&gt;加入logback日志<br>f&gt;EHCache配置文件说明<br><strong>十一、MyBatis的逆向工程</strong><br>1 、创建逆向工程的步骤<br>a&gt;添加依赖和插件<br>b&gt;创建MyBatis的核心配置文件<br>c&gt;创建逆向工程的配置文件<br>d&gt;执行MBG插件的generate目标<br>2 、QBC查询<br><strong>十二、分页插件</strong><br>1 、分页插件使用步骤<br>a&gt;添加依赖<br>b&gt;配置分页插件<br>2 、分页插件的使用</p>
<h1 id="一、MyBatis简介"><a href="#一、MyBatis简介" class="headerlink" title="一、MyBatis简介"></a>一、MyBatis简介</h1><h2 id="1-、MyBatis历史"><a href="#1-、MyBatis历史" class="headerlink" title="1 、MyBatis历史"></a>1 、MyBatis历史</h2><h4 id="MyBatis最初是Apache的一个开源项目-iBatis-2010年-6-月这个项目由Apache-Software-Foundation迁"><a href="#MyBatis最初是Apache的一个开源项目-iBatis-2010年-6-月这个项目由Apache-Software-Foundation迁" class="headerlink" title="MyBatis最初是Apache的一个开源项目 iBatis , 2010年 6 月这个项目由Apache Software Foundation迁"></a>MyBatis最初是Apache的一个开源项目 iBatis , 2010年 6 月这个项目由Apache Software Foundation迁</h4><h4 id="移到了Google-Code。随着开发团队转投Google-Code旗下，-iBatis3-x正式更名为MyBatis。代码于"><a href="#移到了Google-Code。随着开发团队转投Google-Code旗下，-iBatis3-x正式更名为MyBatis。代码于" class="headerlink" title="移到了Google Code。随着开发团队转投Google Code旗下， iBatis3.x正式更名为MyBatis。代码于"></a>移到了Google Code。随着开发团队转投Google Code旗下， iBatis3.x正式更名为MyBatis。代码于</h4><h4 id="2013-年-11-月迁移到Github。"><a href="#2013-年-11-月迁移到Github。" class="headerlink" title="2013 年 11 月迁移到Github。"></a>2013 年 11 月迁移到Github。</h4><h4 id="iBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。-iBatis提供的持久层框架"><a href="#iBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。-iBatis提供的持久层框架" class="headerlink" title="iBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。 iBatis提供的持久层框架"></a>iBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。 iBatis提供的持久层框架</h4><h4 id="包括SQL-Maps和Data-Access-Objects（DAO）。"><a href="#包括SQL-Maps和Data-Access-Objects（DAO）。" class="headerlink" title="包括SQL Maps和Data Access Objects（DAO）。"></a>包括SQL Maps和Data Access Objects（DAO）。</h4><h2 id="2-、MyBatis特性"><a href="#2-、MyBatis特性" class="headerlink" title="2 、MyBatis特性"></a>2 、MyBatis特性</h2><h4 id="1-）-MyBatis-是支持定制化-SQL、存储过程以及高级映射的优秀的持久层框架"><a href="#1-）-MyBatis-是支持定制化-SQL、存储过程以及高级映射的优秀的持久层框架" class="headerlink" title="1 ） MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架"></a>1 ） MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架</h4><h4 id="2-）-MyBatis-避免了几乎所有的-JDBC-代码和手动设置参数以及获取结果集"><a href="#2-）-MyBatis-避免了几乎所有的-JDBC-代码和手动设置参数以及获取结果集" class="headerlink" title="2 ） MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集"></a>2 ） MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集</h4><h4 id="3-）-MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain-Old-Java"><a href="#3-）-MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain-Old-Java" class="headerlink" title="3 ） MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java"></a>3 ） MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java</h4><h4 id="Objects，普通的Java对象）映射成数据库中的记录"><a href="#Objects，普通的Java对象）映射成数据库中的记录" class="headerlink" title="Objects，普通的Java对象）映射成数据库中的记录"></a>Objects，普通的Java对象）映射成数据库中的记录</h4><h4 id="4-）-MyBatis-是一个-半自动的ORM（Object-Relation-Mapping）框架"><a href="#4-）-MyBatis-是一个-半自动的ORM（Object-Relation-Mapping）框架" class="headerlink" title="4 ） MyBatis 是一个 半自动的ORM（Object Relation Mapping）框架"></a>4 ） MyBatis 是一个 半自动的ORM（Object Relation Mapping）框架</h4><h2 id="3-、MyBatis下载"><a href="#3-、MyBatis下载" class="headerlink" title="3 、MyBatis下载"></a>3 、MyBatis下载</h2><h4 id="MyBatis下载地址：https-github-com-mybatis-mybatis"><a href="#MyBatis下载地址：https-github-com-mybatis-mybatis" class="headerlink" title="MyBatis下载地址：https://github.com/mybatis/mybatis-"></a>MyBatis下载地址：<a target="_blank" rel="noopener" href="https://github.com/mybatis/mybatis-">https://github.com/mybatis/mybatis-</a></h4><h2 id="4-、和其它持久化层技术对比"><a href="#4-、和其它持久化层技术对比" class="headerlink" title="4 、和其它持久化层技术对比"></a>4 、和其它持久化层技术对比</h2><h4 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h4><h4 id="SQL-夹杂在Java代码中耦合度高，导致硬编码内伤"><a href="#SQL-夹杂在Java代码中耦合度高，导致硬编码内伤" class="headerlink" title="SQL 夹杂在Java代码中耦合度高，导致硬编码内伤"></a>SQL 夹杂在Java代码中耦合度高，导致硬编码内伤</h4><h4 id="维护不易且实际开发需求中-SQL-有变化，频繁修改的情况多见"><a href="#维护不易且实际开发需求中-SQL-有变化，频繁修改的情况多见" class="headerlink" title="维护不易且实际开发需求中 SQL 有变化，频繁修改的情况多见"></a>维护不易且实际开发需求中 SQL 有变化，频繁修改的情况多见</h4><h4 id="代码冗长，开发效率低"><a href="#代码冗长，开发效率低" class="headerlink" title="代码冗长，开发效率低"></a>代码冗长，开发效率低</h4><h4 id="Hibernate-和-JPA"><a href="#Hibernate-和-JPA" class="headerlink" title="Hibernate 和 JPA"></a>Hibernate 和 JPA</h4><h4 id="操作简便，开发效率高"><a href="#操作简便，开发效率高" class="headerlink" title="操作简便，开发效率高"></a>操作简便，开发效率高</h4><h4 id="程序中的长难复杂-SQL-需要绕过框架"><a href="#程序中的长难复杂-SQL-需要绕过框架" class="headerlink" title="程序中的长难复杂 SQL 需要绕过框架"></a>程序中的长难复杂 SQL 需要绕过框架</h4><h4 id="内部自动生产的-SQL，不容易做特殊优化"><a href="#内部自动生产的-SQL，不容易做特殊优化" class="headerlink" title="内部自动生产的 SQL，不容易做特殊优化"></a>内部自动生产的 SQL，不容易做特殊优化</h4><h4 id="基于全映射的全自动框架，大量字段的-POJO-进行部分映射时比较困难。"><a href="#基于全映射的全自动框架，大量字段的-POJO-进行部分映射时比较困难。" class="headerlink" title="基于全映射的全自动框架，大量字段的 POJO 进行部分映射时比较困难。"></a>基于全映射的全自动框架，大量字段的 POJO 进行部分映射时比较困难。</h4><h4 id="反射操作太多，导致数据库性能下降"><a href="#反射操作太多，导致数据库性能下降" class="headerlink" title="反射操作太多，导致数据库性能下降"></a>反射操作太多，导致数据库性能下降</h4><h4 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h4><h4 id="轻量级，性能出色"><a href="#轻量级，性能出色" class="headerlink" title="轻量级，性能出色"></a>轻量级，性能出色</h4><h4 id="SQL-和-Java-编码分开，功能边界清晰。Java代码专注业务、SQL语句专注数据"><a href="#SQL-和-Java-编码分开，功能边界清晰。Java代码专注业务、SQL语句专注数据" class="headerlink" title="SQL 和 Java 编码分开，功能边界清晰。Java代码专注业务、SQL语句专注数据"></a>SQL 和 Java 编码分开，功能边界清晰。Java代码专注业务、SQL语句专注数据</h4><h4 id="开发效率稍逊于HIbernate，但是完全能够接受"><a href="#开发效率稍逊于HIbernate，但是完全能够接受" class="headerlink" title="开发效率稍逊于HIbernate，但是完全能够接受"></a>开发效率稍逊于HIbernate，但是完全能够接受</h4><h1 id="二、搭建MyBatis"><a href="#二、搭建MyBatis" class="headerlink" title="二、搭建MyBatis"></a>二、搭建MyBatis</h1><h2 id="1-、开发环境"><a href="#1-、开发环境" class="headerlink" title="1 、开发环境"></a>1 、开发环境</h2><h4 id="IDE：idea-2019"><a href="#IDE：idea-2019" class="headerlink" title="IDE：idea 2019."></a>IDE：idea 2019.</h4><h4 id="构建工具：maven-3-5"><a href="#构建工具：maven-3-5" class="headerlink" title="构建工具：maven 3.5."></a>构建工具：maven 3.5.</h4><h4 id="MySQL版本：MySQL-5"><a href="#MySQL版本：MySQL-5" class="headerlink" title="MySQL版本：MySQL 5."></a>MySQL版本：MySQL 5.</h4><h4 id="MyBatis版本：MyBatis-3-5"><a href="#MyBatis版本：MyBatis-3-5" class="headerlink" title="MyBatis版本：MyBatis 3.5."></a>MyBatis版本：MyBatis 3.5.</h4><h2 id="2-、创建maven工程"><a href="#2-、创建maven工程" class="headerlink" title="2 、创建maven工程"></a>2 、创建maven工程</h2><h2 id="a-打包方式：jar"><a href="#a-打包方式：jar" class="headerlink" title="a&gt;打包方式：jar"></a>a&gt;打包方式：jar</h2><h2 id="b-引入依赖"><a href="#b-引入依赖" class="headerlink" title="b&gt;引入依赖"></a>b&gt;引入依赖</h2><h2 id="3-、创建MyBatis的核心配置文件"><a href="#3-、创建MyBatis的核心配置文件" class="headerlink" title="3 、创建MyBatis的核心配置文件"></a>3 、创建MyBatis的核心配置文件</h2><h4 id="习惯上命名为mybatis-config-xml，这个文件名仅仅只是建议，并非强制要求。将来整合Spring"><a href="#习惯上命名为mybatis-config-xml，这个文件名仅仅只是建议，并非强制要求。将来整合Spring" class="headerlink" title="习惯上命名为mybatis-config.xml，这个文件名仅仅只是建议，并非强制要求。将来整合Spring"></a>习惯上命名为mybatis-config.xml，这个文件名仅仅只是建议，并非强制要求。将来整合Spring</h4><h4 id="之后，这个配置文件可以省略，所以大家操作时可以直接复制、粘贴。"><a href="#之后，这个配置文件可以省略，所以大家操作时可以直接复制、粘贴。" class="headerlink" title="之后，这个配置文件可以省略，所以大家操作时可以直接复制、粘贴。"></a>之后，这个配置文件可以省略，所以大家操作时可以直接复制、粘贴。</h4><h4 id="核心配置文件主要用于配置连接数据库的环境以及MyBatis的全局配置信息"><a href="#核心配置文件主要用于配置连接数据库的环境以及MyBatis的全局配置信息" class="headerlink" title="核心配置文件主要用于配置连接数据库的环境以及MyBatis的全局配置信息"></a>核心配置文件主要用于配置连接数据库的环境以及MyBatis的全局配置信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;!-- Mybatis核心 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;3.5.7&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- junit测试 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;4.12&lt;/version&gt;</span><br><span class="line">&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- MySQL驱动 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;5.1.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>

<h4 id="核心配置文件存放的位置是src-main-resources目录下"><a href="#核心配置文件存放的位置是src-main-resources目录下" class="headerlink" title="核心配置文件存放的位置是src&#x2F;main&#x2F;resources目录下"></a>核心配置文件存放的位置是src&#x2F;main&#x2F;resources目录下</h4><h2 id="4-、创建mapper接口"><a href="#4-、创建mapper接口" class="headerlink" title="4 、创建mapper接口"></a>4 、创建mapper接口</h2><h4 id="MyBatis中的mapper接口相当于以前的dao。但是区别在于，mapper仅仅是接口，我们不需要"><a href="#MyBatis中的mapper接口相当于以前的dao。但是区别在于，mapper仅仅是接口，我们不需要" class="headerlink" title="MyBatis中的mapper接口相当于以前的dao。但是区别在于，mapper仅仅是接口，我们不需要"></a>MyBatis中的mapper接口相当于以前的dao。但是区别在于，mapper仅仅是接口，我们不需要</h4><h4 id="提供实现类。"><a href="#提供实现类。" class="headerlink" title="提供实现类。"></a>提供实现类。</h4><h2 id="5-、创建MyBatis的映射文件"><a href="#5-、创建MyBatis的映射文件" class="headerlink" title="5 、创建MyBatis的映射文件"></a>5 、创建MyBatis的映射文件</h2><h4 id="相关概念：-ORM-（-O-bject-R-elationship-M-apping）对象关系映射。"><a href="#相关概念：-ORM-（-O-bject-R-elationship-M-apping）对象关系映射。" class="headerlink" title="相关概念： ORM （ O bject R elationship M apping）对象关系映射。"></a>相关概念： ORM （ O bject R elationship M apping）对象关系映射。</h4><h4 id="对象：Java的实体类对象"><a href="#对象：Java的实体类对象" class="headerlink" title="对象：Java的实体类对象"></a>对象：Java的实体类对象</h4><h4 id="关系：关系型数据库"><a href="#关系：关系型数据库" class="headerlink" title="关系：关系型数据库"></a>关系：关系型数据库</h4><h4 id="映射：二者之间的对应关系"><a href="#映射：二者之间的对应关系" class="headerlink" title="映射：二者之间的对应关系"></a>映射：二者之间的对应关系</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;!--设置连接数据库的环境--&gt;</span><br><span class="line">&lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">&lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">&lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">&lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">&lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;</span><br><span class="line">&lt;property name=&quot;url&quot;</span><br><span class="line">value=&quot;jdbc:mysql://localhost:3306/MyBatis&quot;/&gt;</span><br><span class="line">&lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">&lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt;</span><br><span class="line">&lt;/dataSource&gt;</span><br><span class="line">&lt;/environment&gt;</span><br><span class="line">&lt;/environments&gt;</span><br><span class="line">&lt;!--引入映射文件--&gt;</span><br><span class="line">&lt;mappers&gt;</span><br><span class="line">&lt;mapper resource=&quot;mappers/UserMapper.xml&quot;/&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public interface UserMapper &#123;</span><br></pre></td></tr></table></figure>
<h5 id=""><a href="#" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><h5 id="添加用户信息"><a href="#添加用户信息" class="headerlink" title="* 添加用户信息"></a>* 添加用户信息</h5><h5 id="-1"><a href="#-1" class="headerlink" title="*&#x2F;"></a>*&#x2F;</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int insertUser();</span><br></pre></td></tr></table></figure>
<h5 id="-2"><a href="#-2" class="headerlink" title="}"></a>}</h5><h4 id="Java概念-数据库概念"><a href="#Java概念-数据库概念" class="headerlink" title="Java概念 数据库概念"></a>Java概念 数据库概念</h4><h4 id="类-表"><a href="#类-表" class="headerlink" title="类 表"></a>类 表</h4><h4 id="属性-字段-列"><a href="#属性-字段-列" class="headerlink" title="属性 字段&#x2F;列"></a>属性 字段&#x2F;列</h4><h4 id="对象-记录-行"><a href="#对象-记录-行" class="headerlink" title="对象 记录&#x2F;行"></a>对象 记录&#x2F;行</h4><h4 id="1-、映射文件的命名规则："><a href="#1-、映射文件的命名规则：" class="headerlink" title="1 、映射文件的命名规则："></a>1 、映射文件的命名规则：</h4><h4 id="表所对应的实体类的类名-Mapper-xml"><a href="#表所对应的实体类的类名-Mapper-xml" class="headerlink" title="表所对应的实体类的类名+Mapper.xml"></a>表所对应的实体类的类名+Mapper.xml</h4><h4 id="例如：表t-user，映射的实体类为User，所对应的映射文件为UserMapper-xml"><a href="#例如：表t-user，映射的实体类为User，所对应的映射文件为UserMapper-xml" class="headerlink" title="例如：表t_user，映射的实体类为User，所对应的映射文件为UserMapper.xml"></a>例如：表t_user，映射的实体类为User，所对应的映射文件为UserMapper.xml</h4><h4 id="因此一个映射文件对应一个实体类，对应一张表的操作"><a href="#因此一个映射文件对应一个实体类，对应一张表的操作" class="headerlink" title="因此一个映射文件对应一个实体类，对应一张表的操作"></a>因此一个映射文件对应一个实体类，对应一张表的操作</h4><h4 id="MyBatis映射文件用于编写SQL，访问以及操作表中的数据"><a href="#MyBatis映射文件用于编写SQL，访问以及操作表中的数据" class="headerlink" title="MyBatis映射文件用于编写SQL，访问以及操作表中的数据"></a>MyBatis映射文件用于编写SQL，访问以及操作表中的数据</h4><h4 id="MyBatis映射文件存放的位置是src-main-resources-mappers目录下"><a href="#MyBatis映射文件存放的位置是src-main-resources-mappers目录下" class="headerlink" title="MyBatis映射文件存放的位置是src&#x2F;main&#x2F;resources&#x2F;mappers目录下"></a>MyBatis映射文件存放的位置是src&#x2F;main&#x2F;resources&#x2F;mappers目录下</h4><h4 id="2-、MyBatis中可以面向接口操作数据，要保证两个一致："><a href="#2-、MyBatis中可以面向接口操作数据，要保证两个一致：" class="headerlink" title="2 、MyBatis中可以面向接口操作数据，要保证两个一致："></a>2 、MyBatis中可以面向接口操作数据，要保证两个一致：</h4><h4 id="a-mapper接口的全类名和映射文件的命名空间（namespace）保持一致"><a href="#a-mapper接口的全类名和映射文件的命名空间（namespace）保持一致" class="headerlink" title="a&gt;mapper接口的全类名和映射文件的命名空间（namespace）保持一致"></a>a&gt;mapper接口的全类名和映射文件的命名空间（namespace）保持一致</h4><h4 id="b-mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致"><a href="#b-mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致" class="headerlink" title="b&gt;mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致"></a>b&gt;mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致</h4><h2 id="6-、通过junit测试功能"><a href="#6-、通过junit测试功能" class="headerlink" title="6 、通过junit测试功能"></a>6 、通过junit测试功能</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;mapper namespace=&quot;com.atguigu.mybatis.mapper.UserMapper&quot;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--int insertUser();--&gt;</span><br><span class="line">&lt;insert id=&quot;insertUser&quot;&gt;</span><br><span class="line">insert into t_user values(null,&#x27;张三&#x27;,&#x27;123&#x27;,23,&#x27;女&#x27;)</span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//读取MyBatis的核心配置文件</span><br><span class="line">InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">//创建SqlSessionFactoryBuilder对象</span><br><span class="line">SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new</span><br><span class="line">SqlSessionFactoryBuilder();</span><br><span class="line">//通过核心配置文件所对应的字节输入流创建工厂类SqlSessionFactory，生产SqlSession对象</span><br><span class="line">SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);</span><br><span class="line">//创建SqlSession对象，此时通过SqlSession对象所操作的sql都必须手动提交或回滚事务</span><br><span class="line">//SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">//创建SqlSession对象，此时通过SqlSession对象所操作的sql都会自动提交</span><br><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession(true);</span><br><span class="line">//通过代理模式创建UserMapper接口的代理实现类对象</span><br><span class="line">UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">//调用UserMapper接口中的方法，就可以根据UserMapper的全类名匹配元素文件，通过调用的方法名匹配</span><br><span class="line">映射文件中的SQL标签，并执行标签中的SQL语句</span><br><span class="line">int result = userMapper.insertUser();</span><br><span class="line">//sqlSession.commit();</span><br></pre></td></tr></table></figure>

<h4 id="SqlSession：代表Java程序和-数据库-之间的-会话-。（HttpSession是Java程序和浏览器之间的"><a href="#SqlSession：代表Java程序和-数据库-之间的-会话-。（HttpSession是Java程序和浏览器之间的" class="headerlink" title="SqlSession：代表Java程序和 数据库 之间的 会话 。（HttpSession是Java程序和浏览器之间的"></a>SqlSession：代表Java程序和 数据库 之间的 会话 。（HttpSession是Java程序和浏览器之间的</h4><h4 id="会话）"><a href="#会话）" class="headerlink" title="会话）"></a>会话）</h4><h4 id="SqlSessionFactory：是“生产”SqlSession的“工厂”。"><a href="#SqlSessionFactory：是“生产”SqlSession的“工厂”。" class="headerlink" title="SqlSessionFactory：是“生产”SqlSession的“工厂”。"></a>SqlSessionFactory：是“生产”SqlSession的“工厂”。</h4><h4 id="工厂模式：如果创建某一个对象，使用的过程基本固定，那么我们就可以把创建这个对象的"><a href="#工厂模式：如果创建某一个对象，使用的过程基本固定，那么我们就可以把创建这个对象的" class="headerlink" title="工厂模式：如果创建某一个对象，使用的过程基本固定，那么我们就可以把创建这个对象的"></a>工厂模式：如果创建某一个对象，使用的过程基本固定，那么我们就可以把创建这个对象的</h4><h4 id="相关代码封装到一个“工厂类”中，以后都使用这个工厂类来“生产”我们需要的对象。"><a href="#相关代码封装到一个“工厂类”中，以后都使用这个工厂类来“生产”我们需要的对象。" class="headerlink" title="相关代码封装到一个“工厂类”中，以后都使用这个工厂类来“生产”我们需要的对象。"></a>相关代码封装到一个“工厂类”中，以后都使用这个工厂类来“生产”我们需要的对象。</h4><h2 id="7-、加入log4j日志功能"><a href="#7-、加入log4j日志功能" class="headerlink" title="7 、加入log4j日志功能"></a>7 、加入log4j日志功能</h2><h3 id="a-加入依赖"><a href="#a-加入依赖" class="headerlink" title="a&gt;加入依赖"></a>a&gt;加入依赖</h3><h3 id="b-加入log4j的配置文件"><a href="#b-加入log4j的配置文件" class="headerlink" title="b&gt;加入log4j的配置文件"></a>b&gt;加入log4j的配置文件</h3><h4 id="log4j的配置文件名为log4j-xml，存放的位置是src-main-resources目录下"><a href="#log4j的配置文件名为log4j-xml，存放的位置是src-main-resources目录下" class="headerlink" title="log4j的配置文件名为log4j.xml，存放的位置是src&#x2F;main&#x2F;resources目录下"></a>log4j的配置文件名为log4j.xml，存放的位置是src&#x2F;main&#x2F;resources目录下</h4><h3 id="日志的级别"><a href="#日志的级别" class="headerlink" title="日志的级别"></a>日志的级别</h3><h4 id="FATAL-致命-ERROR-错误-WARN-警告-INFO-信息-DEBUG-调试"><a href="#FATAL-致命-ERROR-错误-WARN-警告-INFO-信息-DEBUG-调试" class="headerlink" title="FATAL(致命)&gt;ERROR(错误)&gt;WARN(警告)&gt;INFO(信息)&gt;DEBUG(调试)"></a>FATAL(致命)&gt;ERROR(错误)&gt;WARN(警告)&gt;INFO(信息)&gt;DEBUG(调试)</h4><h4 id="从左到右打印的内容越来越详细"><a href="#从左到右打印的内容越来越详细" class="headerlink" title="从左到右打印的内容越来越详细"></a>从左到右打印的内容越来越详细</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(&quot;结果：&quot;+result);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- log4j日志 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;log4j&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;log4j&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.2.17&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;log4j:configuration xmlns:log4j=&quot;http://jakarta.apache.org/log4j/&quot;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;appender name=&quot;STDOUT&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;</span><br><span class="line">&lt;param name=&quot;Encoding&quot; value=&quot;UTF-8&quot; /&gt;</span><br><span class="line">&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;</span><br><span class="line">&lt;param name=&quot;ConversionPattern&quot; value=&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125;</span><br><span class="line">%m (%F:%L) \n&quot; /&gt;</span><br><span class="line">&lt;/layout&gt;</span><br><span class="line">&lt;/appender&gt;</span><br><span class="line">&lt;logger name=&quot;java.sql&quot;&gt;</span><br><span class="line">&lt;level value=&quot;debug&quot; /&gt;</span><br><span class="line">&lt;/logger&gt;</span><br><span class="line">&lt;logger name=&quot;org.apache.ibatis&quot;&gt;</span><br><span class="line">&lt;level value=&quot;info&quot; /&gt;</span><br><span class="line">&lt;/logger&gt;</span><br><span class="line">&lt;root&gt;</span><br><span class="line">&lt;level value=&quot;debug&quot; /&gt;</span><br><span class="line">&lt;appender-ref ref=&quot;STDOUT&quot; /&gt;</span><br><span class="line">&lt;/root&gt;</span><br><span class="line">&lt;/log4j:configuration&gt;</span><br></pre></td></tr></table></figure>

<h1 id="三、核心配置文件详解"><a href="#三、核心配置文件详解" class="headerlink" title="三、核心配置文件详解"></a>三、核心配置文件详解</h1><h4 id="核心配置文件中的标签必须按照固定的顺序："><a href="#核心配置文件中的标签必须按照固定的顺序：" class="headerlink" title="核心配置文件中的标签必须按照固定的顺序："></a>核心配置文件中的标签必须按照固定的顺序：</h4><h4 id="properties-settings-typeAliases-typeHandlers-objectFactory-objectWrapperFactory-reflectorF"><a href="#properties-settings-typeAliases-typeHandlers-objectFactory-objectWrapperFactory-reflectorF" class="headerlink" title="properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,objectWrapperFactory?,reflectorF"></a>properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,objectWrapperFactory?,reflectorF</h4><h4 id="actory-plugins-environments-databaseIdProvider-mappers"><a href="#actory-plugins-environments-databaseIdProvider-mappers" class="headerlink" title="actory?,plugins?,environments?,databaseIdProvider?,mappers?"></a>actory?,plugins?,environments?,databaseIdProvider?,mappers?</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">PUBLIC &quot;-//MyBatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">&quot;http://MyBatis.org/dtd/MyBatis-3-config.dtd&quot;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--引入properties文件，此时就可以$&#123;属性名&#125;的方式访问属性值--&gt;</span><br><span class="line">&lt;properties resource=&quot;jdbc.properties&quot;&gt;&lt;/properties&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;settings&gt;</span><br><span class="line">&lt;!--将表中字段的下划线自动转换为驼峰--&gt;</span><br><span class="line">&lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">&lt;!--开启延迟加载--&gt;</span><br><span class="line">&lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">&lt;/settings&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;typeAliases&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">typeAlias：设置某个具体的类型的别名</span><br><span class="line">属性：</span><br><span class="line">type：需要设置别名的类型的全类名</span><br><span class="line">alias：设置此类型的别名，若不设置此属性，该类型拥有默认的别名，即类名且不区分大小</span><br><span class="line">写</span><br><span class="line">若设置此属性，此时该类型的别名只能使用alias所设置的值</span><br><span class="line">--&gt;</span><br><span class="line">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot;&gt;&lt;/typeAlias&gt;--&gt;</span><br><span class="line">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot; alias=&quot;abc&quot;&gt;</span><br><span class="line">&lt;/typeAlias&gt;--&gt;</span><br><span class="line">&lt;!--以包为单位，设置改包下所有的类型都拥有默认的别名，即类名且不区分大小写--&gt;</span><br><span class="line">&lt;package name=&quot;com.atguigu.mybatis.bean&quot;/&gt;</span><br><span class="line">&lt;/typeAliases&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-3"><a href="#-3" class="headerlink" title="&lt;!–"></a>&lt;!–</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">environments：设置多个连接数据库的环境</span><br><span class="line">属性：</span><br><span class="line">default：设置默认使用的环境的id</span><br><span class="line">--&gt;</span><br><span class="line">&lt;environments default=&quot;mysql_test&quot;&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">environment：设置具体的连接数据库的环境信息</span><br><span class="line">属性：</span><br><span class="line">id：设置环境的唯一标识，可通过environments标签中的default设置某一个环境的id，</span><br><span class="line">表示默认使用的环境</span><br><span class="line">--&gt;</span><br><span class="line">&lt;environment id=&quot;mysql_test&quot;&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">transactionManager：设置事务管理方式</span><br><span class="line">属性：</span><br></pre></td></tr></table></figure>

<h1 id="四、MyBatis的增删改查"><a href="#四、MyBatis的增删改查" class="headerlink" title="四、MyBatis的增删改查"></a>四、MyBatis的增删改查</h1><h4 id="1-、添加"><a href="#1-、添加" class="headerlink" title="1 、添加"></a>1 、添加</h4><h4 id="2-、删除"><a href="#2-、删除" class="headerlink" title="2 、删除"></a>2 、删除</h4><h4 id="3-、修改"><a href="#3-、修改" class="headerlink" title="3 、修改"></a>3 、修改</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">type：设置事务管理方式，type=&quot;JDBC|MANAGED&quot;</span><br><span class="line">type=&quot;JDBC&quot;：设置当前环境的事务管理都必须手动处理</span><br><span class="line">type=&quot;MANAGED&quot;：设置事务被管理，例如spring中的AOP</span><br><span class="line">--&gt;</span><br><span class="line">&lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">dataSource：设置数据源</span><br><span class="line">属性：</span><br><span class="line">type：设置数据源的类型，type=&quot;POOLED|UNPOOLED|JNDI&quot;</span><br><span class="line">type=&quot;POOLED&quot;：使用数据库连接池，即会将创建的连接进行缓存，下次使用可以从</span><br><span class="line">缓存中直接获取，不需要重新创建</span><br><span class="line">type=&quot;UNPOOLED&quot;：不使用数据库连接池，即每次使用连接都需要重新创建</span><br><span class="line">type=&quot;JNDI&quot;：调用上下文中的数据源</span><br><span class="line">--&gt;</span><br><span class="line">&lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">&lt;!--设置驱动类的全类名--&gt;</span><br><span class="line">&lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;/&gt;</span><br><span class="line">&lt;!--设置连接数据库的连接地址--&gt;</span><br><span class="line">&lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt;</span><br><span class="line">&lt;!--设置连接数据库的用户名--&gt;</span><br><span class="line">&lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt;</span><br><span class="line">&lt;!--设置连接数据库的密码--&gt;</span><br><span class="line">&lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt;</span><br><span class="line">&lt;/dataSource&gt;</span><br><span class="line">&lt;/environment&gt;</span><br><span class="line">&lt;/environments&gt;</span><br><span class="line">&lt;!--引入映射文件--&gt;</span><br><span class="line">&lt;mappers&gt;</span><br><span class="line">&lt;mapper resource=&quot;UserMapper.xml&quot;/&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">以包为单位，将包下所有的映射文件引入核心配置文件</span><br><span class="line">注意：此方式必须保证mapper接口和mapper映射文件必须在相同的包下</span><br><span class="line">--&gt;</span><br><span class="line">&lt;package name=&quot;com.atguigu.mybatis.mapper&quot;/&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--int insertUser();--&gt;</span><br><span class="line">&lt;insert id=&quot;insertUser&quot;&gt;</span><br><span class="line">insert into t_user values(null,&#x27;admin&#x27;,&#x27;123456&#x27;,23,&#x27;男&#x27;)</span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--int deleteUser();--&gt;</span><br><span class="line">&lt;delete id=&quot;deleteUser&quot;&gt;</span><br><span class="line">delete from t_user where id = 7</span><br><span class="line">&lt;/delete&gt;</span><br></pre></td></tr></table></figure>

<h4 id="4-、查询一个实体类对象"><a href="#4-、查询一个实体类对象" class="headerlink" title="4 、查询一个实体类对象"></a>4 、查询一个实体类对象</h4><h4 id="5-、查询集合"><a href="#5-、查询集合" class="headerlink" title="5 、查询集合"></a>5 、查询集合</h4><h4 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h4><h4 id="1-、查询的标签select必须设置属性resultType或resultMap，用于设置实体类和数据库表的映射"><a href="#1-、查询的标签select必须设置属性resultType或resultMap，用于设置实体类和数据库表的映射" class="headerlink" title="1 、查询的标签select必须设置属性resultType或resultMap，用于设置实体类和数据库表的映射"></a>1 、查询的标签select必须设置属性resultType或resultMap，用于设置实体类和数据库表的映射</h4><h4 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h4><h4 id="resultType：自动映射，用于属性名和表中字段名一致的情况"><a href="#resultType：自动映射，用于属性名和表中字段名一致的情况" class="headerlink" title="resultType：自动映射，用于属性名和表中字段名一致的情况"></a>resultType：自动映射，用于属性名和表中字段名一致的情况</h4><h4 id="resultMap：自定义映射，用于一对多或多对一或字段名和属性名不一致的情况"><a href="#resultMap：自定义映射，用于一对多或多对一或字段名和属性名不一致的情况" class="headerlink" title="resultMap：自定义映射，用于一对多或多对一或字段名和属性名不一致的情况"></a>resultMap：自定义映射，用于一对多或多对一或字段名和属性名不一致的情况</h4><h4 id="2-、当查询的数据为多条时，不能使用实体类作为返回值，只能使用集合，否则会抛出异常"><a href="#2-、当查询的数据为多条时，不能使用实体类作为返回值，只能使用集合，否则会抛出异常" class="headerlink" title="2 、当查询的数据为多条时，不能使用实体类作为返回值，只能使用集合，否则会抛出异常"></a>2 、当查询的数据为多条时，不能使用实体类作为返回值，只能使用集合，否则会抛出异常</h4><h4 id="TooManyResultsException；但是若查询的数据只有一条，可以使用实体类或集合作为返回值"><a href="#TooManyResultsException；但是若查询的数据只有一条，可以使用实体类或集合作为返回值" class="headerlink" title="TooManyResultsException；但是若查询的数据只有一条，可以使用实体类或集合作为返回值"></a>TooManyResultsException；但是若查询的数据只有一条，可以使用实体类或集合作为返回值</h4><h1 id="五、MyBatis获取参数值的两种方式（重点）"><a href="#五、MyBatis获取参数值的两种方式（重点）" class="headerlink" title="五、MyBatis获取参数值的两种方式（重点）"></a>五、MyBatis获取参数值的两种方式（重点）</h1><h4 id="MyBatis获取参数值的两种方式：-和"><a href="#MyBatis获取参数值的两种方式：-和" class="headerlink" title="MyBatis获取参数值的两种方式： ${} 和 #{}"></a>MyBatis获取参数值的两种方式： ${} 和 #{}</h4><h4 id="的本质就是字符串拼接，-的本质就是占位符赋值"><a href="#的本质就是字符串拼接，-的本质就是占位符赋值" class="headerlink" title="${}的本质就是字符串拼接，#{}的本质就是占位符赋值"></a>${}的本质就是字符串拼接，#{}的本质就是占位符赋值</h4><h4 id="使用字符串拼接的方式拼接sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引"><a href="#使用字符串拼接的方式拼接sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引" class="headerlink" title="${}使用字符串拼接的方式拼接sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引"></a>${}使用字符串拼接的方式拼接sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引</h4><h4 id="号；但是-使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时，可以自"><a href="#号；但是-使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时，可以自" class="headerlink" title="号；但是#{}使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时，可以自"></a>号；但是#{}使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时，可以自</h4><h4 id="动添加单引号"><a href="#动添加单引号" class="headerlink" title="动添加单引号"></a>动添加单引号</h4><h2 id="1-、单个字面量类型的参数"><a href="#1-、单个字面量类型的参数" class="headerlink" title="1 、单个字面量类型的参数"></a>1 、单个字面量类型的参数</h2><h4 id="若mapper接口中的方法参数为单个的字面量类型"><a href="#若mapper接口中的方法参数为单个的字面量类型" class="headerlink" title="若mapper接口中的方法参数为单个的字面量类型"></a>若mapper接口中的方法参数为单个的字面量类型</h4><h4 id="此时可以使用-和-以任意的名称获取参数的值，注意-需要手动加单引号"><a href="#此时可以使用-和-以任意的名称获取参数的值，注意-需要手动加单引号" class="headerlink" title="此时可以使用${}和#{}以任意的名称获取参数的值，注意${}需要手动加单引号"></a>此时可以使用${}和#{}以任意的名称获取参数的值，注意${}需要手动加单引号</h4><h2 id="2-、多个字面量类型的参数"><a href="#2-、多个字面量类型的参数" class="headerlink" title="2 、多个字面量类型的参数"></a>2 、多个字面量类型的参数</h2><h4 id="若mapper接口中的方法参数为多个时"><a href="#若mapper接口中的方法参数为多个时" class="headerlink" title="若mapper接口中的方法参数为多个时"></a>若mapper接口中的方法参数为多个时</h4><h4 id="此时MyBatis会自动将这些参数放在一个map集合中，以arg0-arg1…为键，以参数为值；以"><a href="#此时MyBatis会自动将这些参数放在一个map集合中，以arg0-arg1…为键，以参数为值；以" class="headerlink" title="此时MyBatis会自动将这些参数放在一个map集合中，以arg0,arg1…为键，以参数为值；以"></a>此时MyBatis会自动将这些参数放在一个map集合中，以arg0,arg1…为键，以参数为值；以</h4><h4 id="param1-param2…为键，以参数为值；因此只需要通过-和-访问map集合的键就可以获取相对应的"><a href="#param1-param2…为键，以参数为值；因此只需要通过-和-访问map集合的键就可以获取相对应的" class="headerlink" title="param1,param2…为键，以参数为值；因此只需要通过${}和#{}访问map集合的键就可以获取相对应的"></a>param1,param2…为键，以参数为值；因此只需要通过${}和#{}访问map集合的键就可以获取相对应的</h4><h4 id="值，注意-需要手动加单引号"><a href="#值，注意-需要手动加单引号" class="headerlink" title="值，注意${}需要手动加单引号"></a>值，注意${}需要手动加单引号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--int updateUser();--&gt;</span><br><span class="line">&lt;update id=&quot;updateUser&quot;&gt;</span><br><span class="line">update t_user set username=&#x27;ybc&#x27;,password=&#x27;123&#x27; where id = 6</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--User getUserById();--&gt;</span><br><span class="line">&lt;select id=&quot;getUserById&quot; resultType=&quot;com.atguigu.mybatis.bean.User&quot;&gt;</span><br><span class="line">select * from t_user where id = 2</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--List&lt;User&gt; getUserList();--&gt;</span><br><span class="line">&lt;select id=&quot;getUserList&quot; resultType=&quot;com.atguigu.mybatis.bean.User&quot;&gt;</span><br><span class="line">select * from t_user</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-、map集合类型的参数"><a href="#3-、map集合类型的参数" class="headerlink" title="3 、map集合类型的参数"></a>3 、map集合类型的参数</h2><h4 id="若mapper接口中的方法需要的参数为多个时，此时可以手动创建map集合，将这些数据放在map中"><a href="#若mapper接口中的方法需要的参数为多个时，此时可以手动创建map集合，将这些数据放在map中" class="headerlink" title="若mapper接口中的方法需要的参数为多个时，此时可以手动创建map集合，将这些数据放在map中"></a>若mapper接口中的方法需要的参数为多个时，此时可以手动创建map集合，将这些数据放在map中</h4><h4 id="只需要通过-和-访问map集合的键就可以获取相对应的值，注意-需要手动加单引号"><a href="#只需要通过-和-访问map集合的键就可以获取相对应的值，注意-需要手动加单引号" class="headerlink" title="只需要通过${}和#{}访问map集合的键就可以获取相对应的值，注意${}需要手动加单引号"></a>只需要通过${}和#{}访问map集合的键就可以获取相对应的值，注意${}需要手动加单引号</h4><h2 id="4-、实体类类型的参数"><a href="#4-、实体类类型的参数" class="headerlink" title="4 、实体类类型的参数"></a>4 、实体类类型的参数</h2><h4 id="若mapper接口中的方法参数为实体类对象时"><a href="#若mapper接口中的方法参数为实体类对象时" class="headerlink" title="若mapper接口中的方法参数为实体类对象时"></a>若mapper接口中的方法参数为实体类对象时</h4><h4 id="此时可以使用-和-，通过访问实体类对象中的属性名获取属性值，注意-需要手动加单引号"><a href="#此时可以使用-和-，通过访问实体类对象中的属性名获取属性值，注意-需要手动加单引号" class="headerlink" title="此时可以使用${}和#{}，通过访问实体类对象中的属性名获取属性值，注意${}需要手动加单引号"></a>此时可以使用${}和#{}，通过访问实体类对象中的属性名获取属性值，注意${}需要手动加单引号</h4><h2 id="5-、使用-Param标识参数"><a href="#5-、使用-Param标识参数" class="headerlink" title="5 、使用@Param标识参数"></a>5 、使用@Param标识参数</h2><h4 id="可以通过-Param注解标识mapper接口中的方法参数"><a href="#可以通过-Param注解标识mapper接口中的方法参数" class="headerlink" title="可以通过@Param注解标识mapper接口中的方法参数"></a>可以通过@Param注解标识mapper接口中的方法参数</h4><h4 id="此时，会将这些参数放在map集合中，以-Param注解的value属性值为键，以参数为值；以"><a href="#此时，会将这些参数放在map集合中，以-Param注解的value属性值为键，以参数为值；以" class="headerlink" title="此时，会将这些参数放在map集合中，以@Param注解的value属性值为键，以参数为值；以"></a>此时，会将这些参数放在map集合中，以@Param注解的value属性值为键，以参数为值；以</h4><h4 id="param1-param2…为键，以参数为值；只需要通过-和-访问map集合的键就可以获取相对应的值，"><a href="#param1-param2…为键，以参数为值；只需要通过-和-访问map集合的键就可以获取相对应的值，" class="headerlink" title="param1,param2…为键，以参数为值；只需要通过${}和#{}访问map集合的键就可以获取相对应的值，"></a>param1,param2…为键，以参数为值；只需要通过${}和#{}访问map集合的键就可以获取相对应的值，</h4><h4 id="注意-需要手动加单引号"><a href="#注意-需要手动加单引号" class="headerlink" title="注意${}需要手动加单引号"></a>注意${}需要手动加单引号</h4><h1 id="六、MyBatis的各种查询功能"><a href="#六、MyBatis的各种查询功能" class="headerlink" title="六、MyBatis的各种查询功能"></a>六、MyBatis的各种查询功能</h1><h2 id="1-、查询一个实体类对象"><a href="#1-、查询一个实体类对象" class="headerlink" title="1 、查询一个实体类对象"></a>1 、查询一个实体类对象</h2><h2 id="2-、查询一个list集合"><a href="#2-、查询一个list集合" class="headerlink" title="2 、查询一个list集合"></a>2 、查询一个list集合</h2><h2 id="3-、查询单个数据"><a href="#3-、查询单个数据" class="headerlink" title="3 、查询单个数据"></a>3 、查询单个数据</h2><h5 id="-4"><a href="#-4" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 根据用户id查询用户信息</span><br><span class="line">* @param id</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">User getUserById(@Param(&quot;id&quot;) int id);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--User getUserById(@Param(&quot;id&quot;) int id);--&gt;</span><br><span class="line">&lt;select id=&quot;getUserById&quot; resultType=&quot;User&quot;&gt;</span><br><span class="line">select * from t_user where id = #&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-5"><a href="#-5" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><h5 id="查询所有用户信息"><a href="#查询所有用户信息" class="headerlink" title="* 查询所有用户信息"></a>* 查询所有用户信息</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">List&lt;User&gt; getUserList();</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--List&lt;User&gt; getUserList();--&gt;</span><br><span class="line">&lt;select id=&quot;getUserList&quot; resultType=&quot;User&quot;&gt;</span><br><span class="line">select * from t_user</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-、查询一条数据为map集合"><a href="#4-、查询一条数据为map集合" class="headerlink" title="4 、查询一条数据为map集合"></a>4 、查询一条数据为map集合</h2><h2 id="5-、查询多条数据为map集合"><a href="#5-、查询多条数据为map集合" class="headerlink" title="5 、查询多条数据为map集合"></a>5 、查询多条数据为map集合</h2><h3 id="方式一："><a href="#方式一：" class="headerlink" title="方式一："></a>方式一：</h3><h3 id="方式二："><a href="#方式二：" class="headerlink" title="方式二："></a>方式二：</h3><h5 id="-6"><a href="#-6" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><h5 id="查询用户的总记录数"><a href="#查询用户的总记录数" class="headerlink" title="* 查询用户的总记录数"></a>* 查询用户的总记录数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* @return</span><br><span class="line">* 在MyBatis中，对于Java中常用的类型都设置了类型别名</span><br><span class="line">* 例如：java.lang.Integer--&gt;int|integer</span><br><span class="line">* 例如：int--&gt;_int|_integer</span><br><span class="line">* 例如：Map--&gt;map,List--&gt;list</span><br><span class="line">*/</span><br><span class="line">int getCount();</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--int getCount();--&gt;</span><br><span class="line">&lt;select id=&quot;getCount&quot; resultType=&quot;_integer&quot;&gt;</span><br><span class="line">select count(id) from t_user</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-7"><a href="#-7" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 根据用户id查询用户信息为map集合</span><br><span class="line">* @param id</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">Map&lt;String, Object&gt; getUserToMap(@Param(&quot;id&quot;) int id);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Map&lt;String, Object&gt; getUserToMap(@Param(&quot;id&quot;) int id);--&gt;</span><br><span class="line">&lt;select id=&quot;getUserToMap&quot; resultType=&quot;map&quot;&gt;</span><br><span class="line">select * from t_user where id = #&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;!--结果：&#123;password=123456, sex=男, id=1, age=23, username=admin&#125;--&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-8"><a href="#-8" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 查询所有用户信息为map集合</span><br><span class="line">* @return</span><br><span class="line">* 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，此</span><br><span class="line">时可以将这些map放在一个list集合中获取</span><br><span class="line">*/</span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; getAllUserToMap();</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span><br><span class="line">&lt;select id=&quot;getAllUserToMap&quot; resultType=&quot;map&quot;&gt;</span><br><span class="line">select * from t_user</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h1 id="七、特殊SQL的执行"><a href="#七、特殊SQL的执行" class="headerlink" title="七、特殊SQL的执行"></a>七、特殊SQL的执行</h1><h2 id="1-、模糊查询"><a href="#1-、模糊查询" class="headerlink" title="1 、模糊查询"></a>1 、模糊查询</h2><h2 id="2-、批量删除"><a href="#2-、批量删除" class="headerlink" title="2 、批量删除"></a>2 、批量删除</h2><h5 id="-9"><a href="#-9" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* 查询所有用户信息为map集合</span><br><span class="line">* @return</span><br><span class="line">* 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，并</span><br><span class="line">且最终要以一个map的方式返回数据，此时需要通过@MapKey注解设置map集合的键，值是每条数据所对应的</span><br><span class="line">map集合</span><br><span class="line">*/</span><br><span class="line">@MapKey(&quot;id&quot;)</span><br><span class="line">Map&lt;String, Object&gt; getAllUserToMap();</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span><br><span class="line">&lt;select id=&quot;getAllUserToMap&quot; resultType=&quot;map&quot;&gt;</span><br><span class="line">select * from t_user</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">结果：</span><br><span class="line">&lt;!--</span><br><span class="line">&#123;</span><br><span class="line">1=&#123;password=123456, sex=男, id=1, age=23, username=admin&#125;,</span><br><span class="line">2=&#123;password=123456, sex=男, id=2, age=23, username=张三&#125;,</span><br><span class="line">3=&#123;password=123456, sex=男, id=3, age=23, username=张三&#125;</span><br><span class="line">&#125;</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-10"><a href="#-10" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><h5 id="测试模糊查询"><a href="#测试模糊查询" class="headerlink" title="* 测试模糊查询"></a>* 测试模糊查询</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* @param mohu</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">List&lt;User&gt; testMohu(@Param(&quot;mohu&quot;) String mohu);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--List&lt;User&gt; testMohu(@Param(&quot;mohu&quot;) String mohu);--&gt;</span><br><span class="line">&lt;select id=&quot;testMohu&quot; resultType=&quot;User&quot;&gt;</span><br><span class="line">&lt;!--select * from t_user where username like &#x27;%$&#123;mohu&#125;%&#x27;--&gt;</span><br><span class="line">&lt;!--select * from t_user where username like concat(&#x27;%&#x27;,#&#123;mohu&#125;,&#x27;%&#x27;)--&gt;</span><br><span class="line">select * from t_user where username like &quot;%&quot;#&#123;mohu&#125;&quot;%&quot;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-11"><a href="#-11" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><h5 id="批量删除"><a href="#批量删除" class="headerlink" title="* 批量删除"></a>* 批量删除</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* @param ids</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">int deleteMore(@Param(&quot;ids&quot;) String ids);</span><br></pre></td></tr></table></figure>

<h2 id="3-、动态设置表名"><a href="#3-、动态设置表名" class="headerlink" title="3 、动态设置表名"></a>3 、动态设置表名</h2><h2 id="4-、添加功能获取自增的主键"><a href="#4-、添加功能获取自增的主键" class="headerlink" title="4 、添加功能获取自增的主键"></a>4 、添加功能获取自增的主键</h2><h4 id="t-clazz-clazz-id-clazz-name"><a href="#t-clazz-clazz-id-clazz-name" class="headerlink" title="t_clazz(clazz_id,clazz_name)"></a>t_clazz(clazz_id,clazz_name)</h4><h4 id="t-student-student-id-student-name-clazz-id"><a href="#t-student-student-id-student-name-clazz-id" class="headerlink" title="t_student(student_id,student_name,clazz_id)"></a>t_student(student_id,student_name,clazz_id)</h4><h4 id="1-、添加班级信息"><a href="#1-、添加班级信息" class="headerlink" title="1 、添加班级信息"></a>1 、添加班级信息</h4><h4 id="2-、获取新添加的班级的id"><a href="#2-、获取新添加的班级的id" class="headerlink" title="2 、获取新添加的班级的id"></a>2 、获取新添加的班级的id</h4><h4 id="3-、为班级分配学生，即将某学的班级id修改为新添加的班级的id"><a href="#3-、为班级分配学生，即将某学的班级id修改为新添加的班级的id" class="headerlink" title="3 、为班级分配学生，即将某学的班级id修改为新添加的班级的id"></a>3 、为班级分配学生，即将某学的班级id修改为新添加的班级的id</h4><h1 id="八、自定义映射resultMap"><a href="#八、自定义映射resultMap" class="headerlink" title="八、自定义映射resultMap"></a>八、自定义映射resultMap</h1><h2 id="1-、resultMap处理字段和属性的映射关系"><a href="#1-、resultMap处理字段和属性的映射关系" class="headerlink" title="1 、resultMap处理字段和属性的映射关系"></a>1 、resultMap处理字段和属性的映射关系</h2><h4 id="若字段名和实体类中的属性名不一致，则可以通过resultMap设置自定义映射"><a href="#若字段名和实体类中的属性名不一致，则可以通过resultMap设置自定义映射" class="headerlink" title="若字段名和实体类中的属性名不一致，则可以通过resultMap设置自定义映射"></a>若字段名和实体类中的属性名不一致，则可以通过resultMap设置自定义映射</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--int deleteMore(@Param(&quot;ids&quot;) String ids);--&gt;</span><br><span class="line">&lt;delete id=&quot;deleteMore&quot;&gt;</span><br><span class="line">delete from t_user where id in ($&#123;ids&#125;)</span><br><span class="line">&lt;/delete&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-12"><a href="#-12" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><h5 id="动态设置表名，查询所有的用户信息"><a href="#动态设置表名，查询所有的用户信息" class="headerlink" title="* 动态设置表名，查询所有的用户信息"></a>* 动态设置表名，查询所有的用户信息</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* @param tableName</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">List&lt;User&gt; getAllUser(@Param(&quot;tableName&quot;) String tableName);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--List&lt;User&gt; getAllUser(@Param(&quot;tableName&quot;) String tableName);--&gt;</span><br><span class="line">&lt;select id=&quot;getAllUser&quot; resultType=&quot;User&quot;&gt;</span><br><span class="line">select * from $&#123;tableName&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-13"><a href="#-13" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><h5 id="添加用户信息-1"><a href="#添加用户信息-1" class="headerlink" title="* 添加用户信息"></a>* 添加用户信息</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* @param user</span><br><span class="line">* @return</span><br><span class="line">* useGeneratedKeys：设置使用自增的主键</span><br><span class="line">* keyProperty：因为增删改有统一的返回值是受影响的行数，因此只能将获取的自增的主键放在传输的参</span><br><span class="line">数user对象的某个属性中</span><br><span class="line">*/</span><br><span class="line">int insertUser(User user);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--int insertUser(User user);--&gt;</span><br><span class="line">&lt;insert id=&quot;insertUser&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;</span><br><span class="line">insert into t_user values(null,#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;sex&#125;)</span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure>

<h4 id="若字段名和实体类中的属性名不一致，但是字段名符合数据库的规则（使用-），实体类中的属性"><a href="#若字段名和实体类中的属性名不一致，但是字段名符合数据库的规则（使用-），实体类中的属性" class="headerlink" title="若字段名和实体类中的属性名不一致，但是字段名符合数据库的规则（使用_），实体类中的属性"></a>若字段名和实体类中的属性名不一致，但是字段名符合数据库的规则（使用_），实体类中的属性</h4><h4 id="名符合Java的规则（使用驼峰）"><a href="#名符合Java的规则（使用驼峰）" class="headerlink" title="名符合Java的规则（使用驼峰）"></a>名符合Java的规则（使用驼峰）</h4><h4 id="此时也可通过以下两种方式处理字段名和实体类中的属性的映射关系"><a href="#此时也可通过以下两种方式处理字段名和实体类中的属性的映射关系" class="headerlink" title="此时也可通过以下两种方式处理字段名和实体类中的属性的映射关系"></a>此时也可通过以下两种方式处理字段名和实体类中的属性的映射关系</h4><h4 id="a-可以通过为字段起别名的方式，保证和实体类中的属性名保持一致"><a href="#a-可以通过为字段起别名的方式，保证和实体类中的属性名保持一致" class="headerlink" title="a&gt;可以通过为字段起别名的方式，保证和实体类中的属性名保持一致"></a>a&gt;可以通过为字段起别名的方式，保证和实体类中的属性名保持一致</h4><h4 id="b-可以在MyBatis的核心配置文件中设置一个全局配置信息mapUnderscoreToCamelCase，可"><a href="#b-可以在MyBatis的核心配置文件中设置一个全局配置信息mapUnderscoreToCamelCase，可" class="headerlink" title="b&gt;可以在MyBatis的核心配置文件中设置一个全局配置信息mapUnderscoreToCamelCase，可"></a>b&gt;可以在MyBatis的核心配置文件中设置一个全局配置信息mapUnderscoreToCamelCase，可</h4><h4 id="以在查询表中数据时，自动将-类型的字段名转换为驼峰"><a href="#以在查询表中数据时，自动将-类型的字段名转换为驼峰" class="headerlink" title="以在查询表中数据时，自动将_类型的字段名转换为驼峰"></a>以在查询表中数据时，自动将_类型的字段名转换为驼峰</h4><h4 id="例如：字段名user-name，设置了mapUnderscoreToCamelCase，此时字段名就会转换为"><a href="#例如：字段名user-name，设置了mapUnderscoreToCamelCase，此时字段名就会转换为" class="headerlink" title="例如：字段名user_name，设置了mapUnderscoreToCamelCase，此时字段名就会转换为"></a>例如：字段名user_name，设置了mapUnderscoreToCamelCase，此时字段名就会转换为</h4><h4 id="userName"><a href="#userName" class="headerlink" title="userName"></a>userName</h4><h2 id="2-、多对一映射处理"><a href="#2-、多对一映射处理" class="headerlink" title="2 、多对一映射处理"></a>2 、多对一映射处理</h2><h4 id="查询员工信息以及员工所对应的部门信息"><a href="#查询员工信息以及员工所对应的部门信息" class="headerlink" title="查询员工信息以及员工所对应的部门信息"></a>查询员工信息以及员工所对应的部门信息</h4><h3 id="a-级联方式处理映射关系"><a href="#a-级联方式处理映射关系" class="headerlink" title="a&gt;级联方式处理映射关系"></a>a&gt;级联方式处理映射关系</h3><h5 id="-14"><a href="#-14" class="headerlink" title="&lt;!–"></a>&lt;!–</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">resultMap：设置自定义映射</span><br><span class="line">属性：</span><br><span class="line">id：表示自定义映射的唯一标识</span><br><span class="line">type：查询的数据要映射的实体类的类型</span><br><span class="line">子标签：</span><br><span class="line">id：设置主键的映射关系</span><br><span class="line">result：设置普通字段的映射关系</span><br><span class="line">association：设置多对一的映射关系</span><br><span class="line">collection：设置一对多的映射关系</span><br><span class="line">属性：</span><br><span class="line">property：设置映射关系中实体类中的属性名</span><br><span class="line">column：设置映射关系中表中的字段名</span><br><span class="line">--&gt;</span><br><span class="line">&lt;resultMap id=&quot;userMap&quot; type=&quot;User&quot;&gt;</span><br><span class="line">&lt;id property=&quot;id&quot; column=&quot;id&quot;&gt;&lt;/id&gt;</span><br><span class="line">&lt;result property=&quot;userName&quot; column=&quot;user_name&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result property=&quot;password&quot; column=&quot;password&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result property=&quot;age&quot; column=&quot;age&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result property=&quot;sex&quot; column=&quot;sex&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line">&lt;!--List&lt;User&gt; testMohu(@Param(&quot;mohu&quot;) String mohu);--&gt;</span><br><span class="line">&lt;select id=&quot;testMohu&quot; resultMap=&quot;userMap&quot;&gt;</span><br><span class="line">&lt;!--select * from t_user where username like &#x27;%$&#123;mohu&#125;%&#x27;--&gt;</span><br><span class="line">select id,user_name,password,age,sex from t_user where user_name like</span><br><span class="line">concat(&#x27;%&#x27;,#&#123;mohu&#125;,&#x27;%&#x27;)</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h3 id="b-使用association处理映射关系"><a href="#b-使用association处理映射关系" class="headerlink" title="b&gt;使用association处理映射关系"></a>b&gt;使用association处理映射关系</h3><h3 id="c-分步查询"><a href="#c-分步查询" class="headerlink" title="c&gt;分步查询"></a>c&gt;分步查询</h3><h4 id="1-）查询员工信息"><a href="#1-）查询员工信息" class="headerlink" title="1 ）查询员工信息"></a>1 ）查询员工信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;empDeptMap&quot; type=&quot;Emp&quot;&gt;</span><br><span class="line">&lt;id column=&quot;eid&quot; property=&quot;eid&quot;&gt;&lt;/id&gt;</span><br><span class="line">&lt;result column=&quot;ename&quot; property=&quot;ename&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result column=&quot;did&quot; property=&quot;dept.did&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result column=&quot;dname&quot; property=&quot;dept.dname&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line">&lt;!--Emp getEmpAndDeptByEid(@Param(&quot;eid&quot;) int eid);--&gt;</span><br><span class="line">&lt;select id=&quot;getEmpAndDeptByEid&quot; resultMap=&quot;empDeptMap&quot;&gt;</span><br><span class="line">select emp.*,dept.* from t_emp emp left join t_dept dept on emp.did =</span><br><span class="line">dept.did where emp.eid = #&#123;eid&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;empDeptMap&quot; type=&quot;Emp&quot;&gt;</span><br><span class="line">&lt;id column=&quot;eid&quot; property=&quot;eid&quot;&gt;&lt;/id&gt;</span><br><span class="line">&lt;result column=&quot;ename&quot; property=&quot;ename&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;association property=&quot;dept&quot; javaType=&quot;Dept&quot;&gt;</span><br><span class="line">&lt;id column=&quot;did&quot; property=&quot;did&quot;&gt;&lt;/id&gt;</span><br><span class="line">&lt;result column=&quot;dname&quot; property=&quot;dname&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;/association&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line">&lt;!--Emp getEmpAndDeptByEid(@Param(&quot;eid&quot;) int eid);--&gt;</span><br><span class="line">&lt;select id=&quot;getEmpAndDeptByEid&quot; resultMap=&quot;empDeptMap&quot;&gt;</span><br><span class="line">select emp.*,dept.* from t_emp emp left join t_dept dept on emp.did =</span><br><span class="line">dept.did where emp.eid = #&#123;eid&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-15"><a href="#-15" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><h5 id="通过分步查询查询员工信息"><a href="#通过分步查询查询员工信息" class="headerlink" title="* 通过分步查询查询员工信息"></a>* 通过分步查询查询员工信息</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* @param eid</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">Emp getEmpByStep(@Param(&quot;eid&quot;) int eid);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;empDeptStepMap&quot; type=&quot;Emp&quot;&gt;</span><br><span class="line">&lt;id column=&quot;eid&quot; property=&quot;eid&quot;&gt;&lt;/id&gt;</span><br><span class="line">&lt;result column=&quot;ename&quot; property=&quot;ename&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">select：设置分步查询，查询某个属性的值的sql的标识（namespace.sqlId）</span><br><span class="line">column：将sql以及查询结果中的某个字段设置为分步查询的条件</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-）根据员工所对应的部门id查询部门信息"><a href="#2-）根据员工所对应的部门id查询部门信息" class="headerlink" title="2 ）根据员工所对应的部门id查询部门信息"></a>2 ）根据员工所对应的部门id查询部门信息</h4><h2 id="3-、一对多映射处理"><a href="#3-、一对多映射处理" class="headerlink" title="3 、一对多映射处理"></a>3 、一对多映射处理</h2><h3 id="a-collection"><a href="#a-collection" class="headerlink" title="a&gt;collection"></a>a&gt;collection</h3><h3 id="b-分步查询"><a href="#b-分步查询" class="headerlink" title="b&gt;分步查询"></a>b&gt;分步查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;association property=&quot;dept&quot;</span><br><span class="line">select=&quot;com.atguigu.MyBatis.mapper.DeptMapper.getEmpDeptByStep&quot; column=&quot;did&quot;&gt;</span><br><span class="line">&lt;/association&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line">&lt;!--Emp getEmpByStep(@Param(&quot;eid&quot;) int eid);--&gt;</span><br><span class="line">&lt;select id=&quot;getEmpByStep&quot; resultMap=&quot;empDeptStepMap&quot;&gt;</span><br><span class="line">select * from t_emp where eid = #&#123;eid&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-16"><a href="#-16" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 分步查询的第二步：根据员工所对应的did查询部门信息</span><br><span class="line">* @param did</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">Dept getEmpDeptByStep(@Param(&quot;did&quot;) int did);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Dept getEmpDeptByStep(@Param(&quot;did&quot;) int did);--&gt;</span><br><span class="line">&lt;select id=&quot;getEmpDeptByStep&quot; resultType=&quot;Dept&quot;&gt;</span><br><span class="line">select * from t_dept where did = #&#123;did&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-17"><a href="#-17" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 根据部门id查新部门以及部门中的员工信息</span><br><span class="line">* @param did</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">Dept getDeptEmpByDid(@Param(&quot;did&quot;) int did);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;deptEmpMap&quot; type=&quot;Dept&quot;&gt;</span><br><span class="line">&lt;id property=&quot;did&quot; column=&quot;did&quot;&gt;&lt;/id&gt;</span><br><span class="line">&lt;result property=&quot;dname&quot; column=&quot;dname&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">ofType：设置collection标签所处理的集合属性中存储数据的类型</span><br><span class="line">--&gt;</span><br><span class="line">&lt;collection property=&quot;emps&quot; ofType=&quot;Emp&quot;&gt;</span><br><span class="line">&lt;id property=&quot;eid&quot; column=&quot;eid&quot;&gt;&lt;/id&gt;</span><br><span class="line">&lt;result property=&quot;ename&quot; column=&quot;ename&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result property=&quot;age&quot; column=&quot;age&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;result property=&quot;sex&quot; column=&quot;sex&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;/collection&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line">&lt;!--Dept getDeptEmpByDid(@Param(&quot;did&quot;) int did);--&gt;</span><br><span class="line">&lt;select id=&quot;getDeptEmpByDid&quot; resultMap=&quot;deptEmpMap&quot;&gt;</span><br><span class="line">select dept.*,emp.* from t_dept dept left join t_emp emp on dept.did =</span><br><span class="line">emp.did where dept.did = #&#123;did&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h4 id="1-）查询部门信息"><a href="#1-）查询部门信息" class="headerlink" title="1 ）查询部门信息"></a>1 ）查询部门信息</h4><h4 id="2-）根据部门id查询部门中的所有员工"><a href="#2-）根据部门id查询部门中的所有员工" class="headerlink" title="2 ）根据部门id查询部门中的所有员工"></a>2 ）根据部门id查询部门中的所有员工</h4><h4 id="分步查询的优点：可以实现延迟加载，但是必须在核心配置文件中设置全局配置信息："><a href="#分步查询的优点：可以实现延迟加载，但是必须在核心配置文件中设置全局配置信息：" class="headerlink" title="分步查询的优点：可以实现延迟加载，但是必须在核心配置文件中设置全局配置信息："></a>分步查询的优点：可以实现延迟加载，但是必须在核心配置文件中设置全局配置信息：</h4><h4 id="lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载"><a href="#lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载" class="headerlink" title="lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载"></a>lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载</h4><h4 id="aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。-否则，每个"><a href="#aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。-否则，每个" class="headerlink" title="aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。 否则，每个"></a>aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。 否则，每个</h4><h4 id="属性会按需加载"><a href="#属性会按需加载" class="headerlink" title="属性会按需加载"></a>属性会按需加载</h4><h4 id="此时就可以实现按需加载，获取的数据是什么，就只会执行相应的sql。此时可通过association和"><a href="#此时就可以实现按需加载，获取的数据是什么，就只会执行相应的sql。此时可通过association和" class="headerlink" title="此时就可以实现按需加载，获取的数据是什么，就只会执行相应的sql。此时可通过association和"></a>此时就可以实现按需加载，获取的数据是什么，就只会执行相应的sql。此时可通过association和</h4><h4 id="collection中的fetchType属性设置当前的分步查询是否使用延迟加载，fetchType-”lazy-延迟加"><a href="#collection中的fetchType属性设置当前的分步查询是否使用延迟加载，fetchType-”lazy-延迟加" class="headerlink" title="collection中的fetchType属性设置当前的分步查询是否使用延迟加载，fetchType&#x3D;”lazy(延迟加"></a>collection中的fetchType属性设置当前的分步查询是否使用延迟加载，fetchType&#x3D;”lazy(延迟加</h4><h4 id="载-eager-立即加载-”"><a href="#载-eager-立即加载-”" class="headerlink" title="载)|eager(立即加载)”"></a>载)|eager(立即加载)”</h4><h1 id="九、动态SQL"><a href="#九、动态SQL" class="headerlink" title="九、动态SQL"></a>九、动态SQL</h1><h4 id="Mybatis框架的动态SQL技术是一种根据特定条件动态拼装SQL语句的功能，它存在的意义是为了解决"><a href="#Mybatis框架的动态SQL技术是一种根据特定条件动态拼装SQL语句的功能，它存在的意义是为了解决" class="headerlink" title="Mybatis框架的动态SQL技术是一种根据特定条件动态拼装SQL语句的功能，它存在的意义是为了解决"></a>Mybatis框架的动态SQL技术是一种根据特定条件动态拼装SQL语句的功能，它存在的意义是为了解决</h4><h4 id="拼接SQL语句字符串时的痛点问题。"><a href="#拼接SQL语句字符串时的痛点问题。" class="headerlink" title="拼接SQL语句字符串时的痛点问题。"></a>拼接SQL语句字符串时的痛点问题。</h4><h2 id="1-、if"><a href="#1-、if" class="headerlink" title="1 、if"></a>1 、if</h2><h5 id="-18"><a href="#-18" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><h5 id="分步查询部门和部门中的员工"><a href="#分步查询部门和部门中的员工" class="headerlink" title="* 分步查询部门和部门中的员工"></a>* 分步查询部门和部门中的员工</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* @param did</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">Dept getDeptByStep(@Param(&quot;did&quot;) int did);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;deptEmpStep&quot; type=&quot;Dept&quot;&gt;</span><br><span class="line">&lt;id property=&quot;did&quot; column=&quot;did&quot;&gt;&lt;/id&gt;</span><br><span class="line">&lt;result property=&quot;dname&quot; column=&quot;dname&quot;&gt;&lt;/result&gt;</span><br><span class="line">&lt;collection property=&quot;emps&quot; fetchType=&quot;eager&quot;</span><br><span class="line">select=&quot;com.atguigu.MyBatis.mapper.EmpMapper.getEmpListByDid&quot; column=&quot;did&quot;&gt;</span><br><span class="line">&lt;/collection&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line">&lt;!--Dept getDeptByStep(@Param(&quot;did&quot;) int did);--&gt;</span><br><span class="line">&lt;select id=&quot;getDeptByStep&quot; resultMap=&quot;deptEmpStep&quot;&gt;</span><br><span class="line">select * from t_dept where did = #&#123;did&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-19"><a href="#-19" class="headerlink" title="&#x2F;**"></a>&#x2F;**</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 根据部门id查询员工信息</span><br><span class="line">* @param did</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">List&lt;Emp&gt; getEmpListByDid(@Param(&quot;did&quot;) int did);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--List&lt;Emp&gt; getEmpListByDid(@Param(&quot;did&quot;) int did);--&gt;</span><br><span class="line">&lt;select id=&quot;getEmpListByDid&quot; resultType=&quot;Emp&quot;&gt;</span><br><span class="line">select * from t_emp where did = #&#123;did&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h4 id="if标签可通过test属性的表达式进行判断，若表达式的结果为true，则标签中的内容会执行；反之标签中"><a href="#if标签可通过test属性的表达式进行判断，若表达式的结果为true，则标签中的内容会执行；反之标签中" class="headerlink" title="if标签可通过test属性的表达式进行判断，若表达式的结果为true，则标签中的内容会执行；反之标签中"></a>if标签可通过test属性的表达式进行判断，若表达式的结果为true，则标签中的内容会执行；反之标签中</h4><h4 id="的内容不会执行"><a href="#的内容不会执行" class="headerlink" title="的内容不会执行"></a>的内容不会执行</h4><h2 id="2-、where"><a href="#2-、where" class="headerlink" title="2 、where"></a>2 、where</h2><h4 id="where和if一般结合使用："><a href="#where和if一般结合使用：" class="headerlink" title="where和if一般结合使用："></a>where和if一般结合使用：</h4><h4 id="a-若where标签中的if条件都不满足，则where标签没有任何功能，即不会添加where关键字"><a href="#a-若where标签中的if条件都不满足，则where标签没有任何功能，即不会添加where关键字" class="headerlink" title="a&gt;若where标签中的if条件都不满足，则where标签没有任何功能，即不会添加where关键字"></a>a&gt;若where标签中的if条件都不满足，则where标签没有任何功能，即不会添加where关键字</h4><h4 id="b-若where标签中的if条件满足，则where标签会自动添加where关键字，并将条件最前方多余的"><a href="#b-若where标签中的if条件满足，则where标签会自动添加where关键字，并将条件最前方多余的" class="headerlink" title="b&gt;若where标签中的if条件满足，则where标签会自动添加where关键字，并将条件最前方多余的"></a>b&gt;若where标签中的if条件满足，则where标签会自动添加where关键字，并将条件最前方多余的</h4><h4 id="and去掉"><a href="#and去掉" class="headerlink" title="and去掉"></a>and去掉</h4><h4 id="注意：where标签不能去掉条件最后多余的and"><a href="#注意：where标签不能去掉条件最后多余的and" class="headerlink" title="注意：where标签不能去掉条件最后多余的and"></a>注意：where标签不能去掉条件最后多余的and</h4><h2 id="3-、trim"><a href="#3-、trim" class="headerlink" title="3 、trim"></a>3 、trim</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--List&lt;Emp&gt; getEmpListByMoreTJ(Emp emp);--&gt;</span><br><span class="line">&lt;select id=&quot;getEmpListByMoreTJ&quot; resultType=&quot;Emp&quot;&gt;</span><br><span class="line">select * from t_emp where 1=</span><br><span class="line">&lt;if test=&quot;ename != &#x27;&#x27; and ename != null&quot;&gt;</span><br><span class="line">and ename = #&#123;ename&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;age != &#x27;&#x27; and age != null&quot;&gt;</span><br><span class="line">and age = #&#123;age&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;sex != &#x27;&#x27; and sex != null&quot;&gt;</span><br><span class="line">and sex = #&#123;sex&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getEmpListByMoreTJ2&quot; resultType=&quot;Emp&quot;&gt;</span><br><span class="line">select * from t_emp</span><br><span class="line">&lt;where&gt;</span><br><span class="line">&lt;if test=&quot;ename != &#x27;&#x27; and ename != null&quot;&gt;</span><br><span class="line">ename = #&#123;ename&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;age != &#x27;&#x27; and age != null&quot;&gt;</span><br><span class="line">and age = #&#123;age&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;sex != &#x27;&#x27; and sex != null&quot;&gt;</span><br><span class="line">and sex = #&#123;sex&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;getEmpListByMoreTJ&quot; resultType=&quot;Emp&quot;&gt;</span><br><span class="line">select * from t_emp</span><br><span class="line">&lt;trim prefix=&quot;where&quot; suffixOverrides=&quot;and&quot;&gt;</span><br><span class="line">&lt;if test=&quot;ename != &#x27;&#x27; and ename != null&quot;&gt;</span><br><span class="line">ename = #&#123;ename&#125; and</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;age != &#x27;&#x27; and age != null&quot;&gt;</span><br><span class="line">age = #&#123;age&#125; and</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;sex != &#x27;&#x27; and sex != null&quot;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="trim用于去掉或添加标签中的内容"><a href="#trim用于去掉或添加标签中的内容" class="headerlink" title="trim用于去掉或添加标签中的内容"></a>trim用于去掉或添加标签中的内容</h4><h4 id="常用属性："><a href="#常用属性：" class="headerlink" title="常用属性："></a>常用属性：</h4><h4 id="prefix：在trim标签中的内容的前面添加某些内容"><a href="#prefix：在trim标签中的内容的前面添加某些内容" class="headerlink" title="prefix：在trim标签中的内容的前面添加某些内容"></a>prefix：在trim标签中的内容的前面添加某些内容</h4><h4 id="prefixOverrides：在trim标签中的内容的前面去掉某些内容"><a href="#prefixOverrides：在trim标签中的内容的前面去掉某些内容" class="headerlink" title="prefixOverrides：在trim标签中的内容的前面去掉某些内容"></a>prefixOverrides：在trim标签中的内容的前面去掉某些内容</h4><h4 id="suffix：在trim标签中的内容的后面添加某些内容"><a href="#suffix：在trim标签中的内容的后面添加某些内容" class="headerlink" title="suffix：在trim标签中的内容的后面添加某些内容"></a>suffix：在trim标签中的内容的后面添加某些内容</h4><h4 id="suffixOverrides：在trim标签中的内容的后面去掉某些内容"><a href="#suffixOverrides：在trim标签中的内容的后面去掉某些内容" class="headerlink" title="suffixOverrides：在trim标签中的内容的后面去掉某些内容"></a>suffixOverrides：在trim标签中的内容的后面去掉某些内容</h4><h2 id="4-、choose、when、otherwise"><a href="#4-、choose、when、otherwise" class="headerlink" title="4 、choose、when、otherwise"></a>4 、choose、when、otherwise</h2><h4 id="choose、when、otherwise相当于if…else-if-else"><a href="#choose、when、otherwise相当于if…else-if-else" class="headerlink" title="choose、when、otherwise相当于if…else if..else"></a>choose、when、otherwise相当于if…else if..else</h4><h2 id="5-、foreach"><a href="#5-、foreach" class="headerlink" title="5 、foreach"></a>5 、foreach</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sex = #&#123;sex&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;/trim&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--List&lt;Emp&gt; getEmpListByChoose(Emp emp);--&gt;</span><br><span class="line">&lt;select id=&quot;getEmpListByChoose&quot; resultType=&quot;Emp&quot;&gt;</span><br><span class="line">select &lt;include refid=&quot;empColumns&quot;&gt;&lt;/include&gt; from t_emp</span><br><span class="line">&lt;where&gt;</span><br><span class="line">&lt;choose&gt;</span><br><span class="line">&lt;when test=&quot;ename != &#x27;&#x27; and ename != null&quot;&gt;</span><br><span class="line">ename = #&#123;ename&#125;</span><br><span class="line">&lt;/when&gt;</span><br><span class="line">&lt;when test=&quot;age != &#x27;&#x27; and age != null&quot;&gt;</span><br><span class="line">age = #&#123;age&#125;</span><br><span class="line">&lt;/when&gt;</span><br><span class="line">&lt;when test=&quot;sex != &#x27;&#x27; and sex != null&quot;&gt;</span><br><span class="line">sex = #&#123;sex&#125;</span><br><span class="line">&lt;/when&gt;</span><br><span class="line">&lt;when test=&quot;email != &#x27;&#x27; and email != null&quot;&gt;</span><br><span class="line">email = #&#123;email&#125;</span><br><span class="line">&lt;/when&gt;</span><br><span class="line">&lt;/choose&gt;</span><br><span class="line">&lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--int insertMoreEmp(List&lt;Emp&gt; emps);--&gt;</span><br><span class="line">&lt;insert id=&quot;insertMoreEmp&quot;&gt;</span><br><span class="line">insert into t_emp values</span><br><span class="line">&lt;foreach collection=&quot;emps&quot; item=&quot;emp&quot; separator=&quot;,&quot;&gt;</span><br><span class="line">(null,#&#123;emp.ename&#125;,#&#123;emp.age&#125;,#&#123;emp.sex&#125;,#&#123;emp.email&#125;,null)</span><br><span class="line">&lt;/foreach&gt;</span><br><span class="line">&lt;/insert&gt;</span><br><span class="line">&lt;!--int deleteMoreByArray(int[] eids);--&gt;</span><br><span class="line">&lt;delete id=&quot;deleteMoreByArray&quot;&gt;</span><br><span class="line">delete from t_emp where</span><br><span class="line">&lt;foreach collection=&quot;eids&quot; item=&quot;eid&quot; separator=&quot;or&quot;&gt;</span><br><span class="line">eid = #&#123;eid&#125;</span><br><span class="line">&lt;/foreach&gt;</span><br></pre></td></tr></table></figure>

<h4 id="属性："><a href="#属性：" class="headerlink" title="属性："></a>属性：</h4><h4 id="collection：设置要循环的数组或集合"><a href="#collection：设置要循环的数组或集合" class="headerlink" title="collection：设置要循环的数组或集合"></a>collection：设置要循环的数组或集合</h4><h4 id="item：表示集合或数组中的每一个数据"><a href="#item：表示集合或数组中的每一个数据" class="headerlink" title="item：表示集合或数组中的每一个数据"></a>item：表示集合或数组中的每一个数据</h4><h4 id="separator：设置循环体之间的分隔符"><a href="#separator：设置循环体之间的分隔符" class="headerlink" title="separator：设置循环体之间的分隔符"></a>separator：设置循环体之间的分隔符</h4><h4 id="open：设置foreach标签中的内容的开始符"><a href="#open：设置foreach标签中的内容的开始符" class="headerlink" title="open：设置foreach标签中的内容的开始符"></a>open：设置foreach标签中的内容的开始符</h4><h4 id="close：设置foreach标签中的内容的结束符"><a href="#close：设置foreach标签中的内容的结束符" class="headerlink" title="close：设置foreach标签中的内容的结束符"></a>close：设置foreach标签中的内容的结束符</h4><h2 id="6-、SQL片段"><a href="#6-、SQL片段" class="headerlink" title="6 、SQL片段"></a>6 、SQL片段</h2><h4 id="sql片段，可以记录一段公共sql片段，在使用的地方通过include标签进行引入"><a href="#sql片段，可以记录一段公共sql片段，在使用的地方通过include标签进行引入" class="headerlink" title="sql片段，可以记录一段公共sql片段，在使用的地方通过include标签进行引入"></a>sql片段，可以记录一段公共sql片段，在使用的地方通过include标签进行引入</h4><h1 id="十、MyBatis的缓存"><a href="#十、MyBatis的缓存" class="headerlink" title="十、MyBatis的缓存"></a>十、MyBatis的缓存</h1><h2 id="1-、MyBatis的一级缓存"><a href="#1-、MyBatis的一级缓存" class="headerlink" title="1 、MyBatis的一级缓存"></a>1 、MyBatis的一级缓存</h2><h4 id="一级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就"><a href="#一级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就" class="headerlink" title="一级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就"></a>一级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就</h4><h4 id="会从缓存中直接获取，不会从数据库重新访问"><a href="#会从缓存中直接获取，不会从数据库重新访问" class="headerlink" title="会从缓存中直接获取，不会从数据库重新访问"></a>会从缓存中直接获取，不会从数据库重新访问</h4><h4 id="使一级缓存失效的四种情况："><a href="#使一级缓存失效的四种情况：" class="headerlink" title="使一级缓存失效的四种情况："></a>使一级缓存失效的四种情况：</h4><h4 id="1-不同的SqlSession对应不同的一级缓存"><a href="#1-不同的SqlSession对应不同的一级缓存" class="headerlink" title="1) 不同的SqlSession对应不同的一级缓存"></a>1) 不同的SqlSession对应不同的一级缓存</h4><h4 id="2-同一个SqlSession但是查询条件不同"><a href="#2-同一个SqlSession但是查询条件不同" class="headerlink" title="2) 同一个SqlSession但是查询条件不同"></a>2) 同一个SqlSession但是查询条件不同</h4><h4 id="3-同一个SqlSession两次查询期间执行了任何一次增删改操作"><a href="#3-同一个SqlSession两次查询期间执行了任何一次增删改操作" class="headerlink" title="3) 同一个SqlSession两次查询期间执行了任何一次增删改操作"></a>3) 同一个SqlSession两次查询期间执行了任何一次增删改操作</h4><h4 id="4-同一个SqlSession两次查询期间手动清空了缓存"><a href="#4-同一个SqlSession两次查询期间手动清空了缓存" class="headerlink" title="4) 同一个SqlSession两次查询期间手动清空了缓存"></a>4) 同一个SqlSession两次查询期间手动清空了缓存</h4><h2 id="2-、MyBatis的二级缓存"><a href="#2-、MyBatis的二级缓存" class="headerlink" title="2 、MyBatis的二级缓存"></a>2 、MyBatis的二级缓存</h2><h4 id="二级缓存是SqlSessionFactory级别，通过同一个SqlSessionFactory创建的SqlSession查询的结果会被"><a href="#二级缓存是SqlSessionFactory级别，通过同一个SqlSessionFactory创建的SqlSession查询的结果会被" class="headerlink" title="二级缓存是SqlSessionFactory级别，通过同一个SqlSessionFactory创建的SqlSession查询的结果会被"></a>二级缓存是SqlSessionFactory级别，通过同一个SqlSessionFactory创建的SqlSession查询的结果会被</h4><h4 id="缓存；此后若再次执行相同的查询语句，结果就会从缓存中获取"><a href="#缓存；此后若再次执行相同的查询语句，结果就会从缓存中获取" class="headerlink" title="缓存；此后若再次执行相同的查询语句，结果就会从缓存中获取"></a>缓存；此后若再次执行相同的查询语句，结果就会从缓存中获取</h4><h4 id="二级缓存开启的条件："><a href="#二级缓存开启的条件：" class="headerlink" title="二级缓存开启的条件："></a>二级缓存开启的条件：</h4><h4 id="a-在核心配置文件中，设置全局配置属性cacheEnabled-”true”，默认为true，不需要设置"><a href="#a-在核心配置文件中，设置全局配置属性cacheEnabled-”true”，默认为true，不需要设置" class="headerlink" title="a&gt;在核心配置文件中，设置全局配置属性cacheEnabled&#x3D;”true”，默认为true，不需要设置"></a>a&gt;在核心配置文件中，设置全局配置属性cacheEnabled&#x3D;”true”，默认为true，不需要设置</h4><h4 id="b-在映射文件中设置标签"><a href="#b-在映射文件中设置标签" class="headerlink" title="b&gt;在映射文件中设置标签"></a>b&gt;在映射文件中设置标签<cache /></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;/delete&gt;</span><br><span class="line">&lt;!--int deleteMoreByArray(int[] eids);--&gt;</span><br><span class="line">&lt;delete id=&quot;deleteMoreByArray&quot;&gt;</span><br><span class="line">delete from t_emp where eid in</span><br><span class="line">&lt;foreach collection=&quot;eids&quot; item=&quot;eid&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt;</span><br><span class="line">#&#123;eid&#125;</span><br><span class="line">&lt;/foreach&gt;</span><br><span class="line">&lt;/delete&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;sql id=&quot;empColumns&quot;&gt;</span><br><span class="line">eid,ename,age,sex,did</span><br><span class="line">&lt;/sql&gt;</span><br><span class="line">select &lt;include refid=&quot;empColumns&quot;&gt;&lt;/include&gt; from t_emp</span><br></pre></td></tr></table></figure>

<h4 id="c-二级缓存必须在SqlSession关闭或提交之后有效"><a href="#c-二级缓存必须在SqlSession关闭或提交之后有效" class="headerlink" title="c&gt;二级缓存必须在SqlSession关闭或提交之后有效"></a>c&gt;二级缓存必须在SqlSession关闭或提交之后有效</h4><h4 id="d-查询的数据所转换的实体类类型必须实现序列化的接口"><a href="#d-查询的数据所转换的实体类类型必须实现序列化的接口" class="headerlink" title="d&gt;查询的数据所转换的实体类类型必须实现序列化的接口"></a>d&gt;查询的数据所转换的实体类类型必须实现序列化的接口</h4><h4 id="使二级缓存失效的情况："><a href="#使二级缓存失效的情况：" class="headerlink" title="使二级缓存失效的情况："></a>使二级缓存失效的情况：</h4><h4 id="两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效"><a href="#两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效" class="headerlink" title="两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效"></a>两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效</h4><h2 id="3-、二级缓存的相关配置"><a href="#3-、二级缓存的相关配置" class="headerlink" title="3 、二级缓存的相关配置"></a>3 、二级缓存的相关配置</h2><h4 id="在mapper配置文件中添加的cache标签可以设置一些属性："><a href="#在mapper配置文件中添加的cache标签可以设置一些属性：" class="headerlink" title="在mapper配置文件中添加的cache标签可以设置一些属性："></a>在mapper配置文件中添加的cache标签可以设置一些属性：</h4><h4 id="eviction属性：缓存回收策略"><a href="#eviction属性：缓存回收策略" class="headerlink" title="eviction属性：缓存回收策略"></a>eviction属性：缓存回收策略</h4><h4 id="LRU（Least-Recently-Used）-–-最近最少使用的：移除最长时间不被使用的对象。"><a href="#LRU（Least-Recently-Used）-–-最近最少使用的：移除最长时间不被使用的对象。" class="headerlink" title="LRU（Least Recently Used） – 最近最少使用的：移除最长时间不被使用的对象。"></a>LRU（Least Recently Used） – 最近最少使用的：移除最长时间不被使用的对象。</h4><h4 id="FIFO（First-in-First-out）-–-先进先出：按对象进入缓存的顺序来移除它们。"><a href="#FIFO（First-in-First-out）-–-先进先出：按对象进入缓存的顺序来移除它们。" class="headerlink" title="FIFO（First in First out） – 先进先出：按对象进入缓存的顺序来移除它们。"></a>FIFO（First in First out） – 先进先出：按对象进入缓存的顺序来移除它们。</h4><h4 id="SOFT-–-软引用：移除基于垃圾回收器状态和软引用规则的对象。"><a href="#SOFT-–-软引用：移除基于垃圾回收器状态和软引用规则的对象。" class="headerlink" title="SOFT – 软引用：移除基于垃圾回收器状态和软引用规则的对象。"></a>SOFT – 软引用：移除基于垃圾回收器状态和软引用规则的对象。</h4><h4 id="WEAK-–-弱引用：更积极地移除基于垃圾收集器状态和弱引用规则的对象。"><a href="#WEAK-–-弱引用：更积极地移除基于垃圾收集器状态和弱引用规则的对象。" class="headerlink" title="WEAK – 弱引用：更积极地移除基于垃圾收集器状态和弱引用规则的对象。"></a>WEAK – 弱引用：更积极地移除基于垃圾收集器状态和弱引用规则的对象。</h4><h4 id="默认的是-LRU。"><a href="#默认的是-LRU。" class="headerlink" title="默认的是 LRU。"></a>默认的是 LRU。</h4><h4 id="flushInterval属性：刷新间隔，单位毫秒"><a href="#flushInterval属性：刷新间隔，单位毫秒" class="headerlink" title="flushInterval属性：刷新间隔，单位毫秒"></a>flushInterval属性：刷新间隔，单位毫秒</h4><h4 id="默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句时刷新"><a href="#默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句时刷新" class="headerlink" title="默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句时刷新"></a>默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句时刷新</h4><h4 id="size属性：引用数目，正整数"><a href="#size属性：引用数目，正整数" class="headerlink" title="size属性：引用数目，正整数"></a>size属性：引用数目，正整数</h4><h4 id="代表缓存最多可以存储多少个对象，太大容易导致内存溢出"><a href="#代表缓存最多可以存储多少个对象，太大容易导致内存溢出" class="headerlink" title="代表缓存最多可以存储多少个对象，太大容易导致内存溢出"></a>代表缓存最多可以存储多少个对象，太大容易导致内存溢出</h4><h4 id="readOnly属性：只读，true-false"><a href="#readOnly属性：只读，true-false" class="headerlink" title="readOnly属性：只读，true&#x2F;false"></a>readOnly属性：只读，true&#x2F;false</h4><h4 id="true：只读缓存；会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了"><a href="#true：只读缓存；会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了" class="headerlink" title="true：只读缓存；会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了"></a>true：只读缓存；会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了</h4><h4 id="很重要的性能优势。"><a href="#很重要的性能优势。" class="headerlink" title="很重要的性能优势。"></a>很重要的性能优势。</h4><h4 id="false：读写缓存；会返回缓存对象的拷贝（通过序列化）。这会慢一些，但是安全，因此默认是"><a href="#false：读写缓存；会返回缓存对象的拷贝（通过序列化）。这会慢一些，但是安全，因此默认是" class="headerlink" title="false：读写缓存；会返回缓存对象的拷贝（通过序列化）。这会慢一些，但是安全，因此默认是"></a>false：读写缓存；会返回缓存对象的拷贝（通过序列化）。这会慢一些，但是安全，因此默认是</h4><h4 id="false。"><a href="#false。" class="headerlink" title="false。"></a>false。</h4><h2 id="4-、MyBatis缓存查询的顺序"><a href="#4-、MyBatis缓存查询的顺序" class="headerlink" title="4 、MyBatis缓存查询的顺序"></a>4 、MyBatis缓存查询的顺序</h2><h4 id="先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用。"><a href="#先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用。" class="headerlink" title="先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用。"></a>先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用。</h4><h4 id="如果二级缓存没有命中，再查询一级缓存"><a href="#如果二级缓存没有命中，再查询一级缓存" class="headerlink" title="如果二级缓存没有命中，再查询一级缓存"></a>如果二级缓存没有命中，再查询一级缓存</h4><h4 id="如果一级缓存也没有命中，则查询数据库"><a href="#如果一级缓存也没有命中，则查询数据库" class="headerlink" title="如果一级缓存也没有命中，则查询数据库"></a>如果一级缓存也没有命中，则查询数据库</h4><h4 id="SqlSession关闭之后，一级缓存中的数据会写入二级缓存"><a href="#SqlSession关闭之后，一级缓存中的数据会写入二级缓存" class="headerlink" title="SqlSession关闭之后，一级缓存中的数据会写入二级缓存"></a>SqlSession关闭之后，一级缓存中的数据会写入二级缓存</h4><h2 id="5-、整合第三方缓存EHCache"><a href="#5-、整合第三方缓存EHCache" class="headerlink" title="5 、整合第三方缓存EHCache"></a>5 、整合第三方缓存EHCache</h2><h3 id="a-添加依赖"><a href="#a-添加依赖" class="headerlink" title="a&gt;添加依赖"></a>a&gt;添加依赖</h3><h4 id="jar包名称-作用"><a href="#jar包名称-作用" class="headerlink" title="jar包名称 作用"></a>jar包名称 作用</h4><h4 id="mybatis-ehcache-Mybatis和EHCache的整合包"><a href="#mybatis-ehcache-Mybatis和EHCache的整合包" class="headerlink" title="mybatis-ehcache Mybatis和EHCache的整合包"></a>mybatis-ehcache Mybatis和EHCache的整合包</h4><h4 id="ehcache-EHCache核心包"><a href="#ehcache-EHCache核心包" class="headerlink" title="ehcache EHCache核心包"></a>ehcache EHCache核心包</h4><h4 id="slf4j-api-SLF4J日志门面包"><a href="#slf4j-api-SLF4J日志门面包" class="headerlink" title="slf4j-api SLF4J日志门面包"></a>slf4j-api SLF4J日志门面包</h4><h4 id="logback-classic-支持SLF4J门面接口的一个具体实现"><a href="#logback-classic-支持SLF4J门面接口的一个具体实现" class="headerlink" title="logback-classic 支持SLF4J门面接口的一个具体实现"></a>logback-classic 支持SLF4J门面接口的一个具体实现</h4><h3 id="b-各jar包功能"><a href="#b-各jar包功能" class="headerlink" title="b&gt;各jar包功能"></a>b&gt;各jar包功能</h3><h3 id="c-创建EHCache的配置文件ehcache-xml"><a href="#c-创建EHCache的配置文件ehcache-xml" class="headerlink" title="c&gt;创建EHCache的配置文件ehcache.xml"></a>c&gt;创建EHCache的配置文件ehcache.xml</h3><h3 id="d-设置二级缓存的类型"><a href="#d-设置二级缓存的类型" class="headerlink" title="d&gt;设置二级缓存的类型"></a>d&gt;设置二级缓存的类型</h3><h3 id="e-加入logback日志"><a href="#e-加入logback日志" class="headerlink" title="e&gt;加入logback日志"></a>e&gt;加入logback日志</h3><h4 id="存在SLF4J时，作为简易日志的log4j将失效，此时我们需要借助SLF4J的具体实现logback来打印日志。"><a href="#存在SLF4J时，作为简易日志的log4j将失效，此时我们需要借助SLF4J的具体实现logback来打印日志。" class="headerlink" title="存在SLF4J时，作为简易日志的log4j将失效，此时我们需要借助SLF4J的具体实现logback来打印日志。"></a>存在SLF4J时，作为简易日志的log4j将失效，此时我们需要借助SLF4J的具体实现logback来打印日志。</h4><h4 id="创建logback的配置文件logback-xml"><a href="#创建logback的配置文件logback-xml" class="headerlink" title="创建logback的配置文件logback.xml"></a>创建logback的配置文件logback.xml</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Mybatis EHCache整合包 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.mybatis.caches&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mybatis-ehcache&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.2.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- slf4j日志门面的一个具体实现 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.2.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class="line">&lt;ehcache xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">xsi:noNamespaceSchemaLocation=&quot;../config/ehcache.xsd&quot;&gt;</span><br><span class="line">&lt;!-- 磁盘保存路径 --&gt;</span><br><span class="line">&lt;diskStore path=&quot;D:\atguigu\ehcache&quot;/&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;defaultCache</span><br><span class="line">maxElementsInMemory=&quot;1000&quot;</span><br><span class="line">maxElementsOnDisk=&quot;10000000&quot;</span><br><span class="line">eternal=&quot;false&quot;</span><br><span class="line">overflowToDisk=&quot;true&quot;</span><br><span class="line">timeToIdleSeconds=&quot;120&quot;</span><br><span class="line">timeToLiveSeconds=&quot;120&quot;</span><br><span class="line">diskExpiryThreadIntervalSeconds=&quot;120&quot;</span><br><span class="line">memoryStoreEvictionPolicy=&quot;LRU&quot;&gt;</span><br><span class="line">&lt;/defaultCache&gt;</span><br><span class="line">&lt;/ehcache&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="f-EHCache配置文件说明"><a href="#f-EHCache配置文件说明" class="headerlink" title="f&gt;EHCache配置文件说明"></a>f&gt;EHCache配置文件说明</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;configuration debug=&quot;true&quot;&gt;</span><br><span class="line">&lt;!-- 指定日志输出的位置 --&gt;</span><br><span class="line">&lt;appender name=&quot;STDOUT&quot;</span><br><span class="line">class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;</span><br><span class="line">&lt;encoder&gt;</span><br><span class="line">&lt;!-- 日志输出的格式 --&gt;</span><br><span class="line">&lt;!-- 按照顺序分别是：时间、日志级别、线程名称、打印日志的类、日志主体内容、换行 -</span><br><span class="line">-&gt;</span><br><span class="line">&lt;pattern&gt;[%d&#123;HH:mm:ss.SSS&#125;] [%-5level] [%thread] [%logger]</span><br><span class="line">[%msg]%n&lt;/pattern&gt;</span><br><span class="line">&lt;/encoder&gt;</span><br><span class="line">&lt;/appender&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-20"><a href="#-20" class="headerlink" title=""></a><!-- 设置全局日志级别。日志级别按顺序分别是：DEBUG、INFO、WARN、ERROR --></h5><h5 id="-21"><a href="#-21" class="headerlink" title=""></a><!-- 指定任何一个日志级别都只打印当前级别和后面级别的日志。 --></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;root level=&quot;DEBUG&quot;&gt;</span><br><span class="line">&lt;!-- 指定打印日志的appender，这里通过“STDOUT”引用了前面配置的appender --&gt;</span><br><span class="line">&lt;appender-ref ref=&quot;STDOUT&quot; /&gt;</span><br><span class="line">&lt;/root&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-22"><a href="#-22" class="headerlink" title=""></a><!-- 根据特殊需求指定局部日志级别 --></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;logger name=&quot;com.atguigu.crowd.mapper&quot; level=&quot;DEBUG&quot;/&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<h4 id="属性名"><a href="#属性名" class="headerlink" title="属性名"></a>属性名</h4><h4 id="是"><a href="#是" class="headerlink" title="是"></a>是</h4><h4 id="否"><a href="#否" class="headerlink" title="否"></a>否</h4><h4 id="必"><a href="#必" class="headerlink" title="必"></a>必</h4><h4 id="须"><a href="#须" class="headerlink" title="须"></a>须</h4><h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><h4 id="maxElementsInMemory-是-在内存中缓存的element的最大数目"><a href="#maxElementsInMemory-是-在内存中缓存的element的最大数目" class="headerlink" title="maxElementsInMemory 是 在内存中缓存的element的最大数目"></a>maxElementsInMemory 是 在内存中缓存的element的最大数目</h4><h4 id="maxElementsOnDisk-是"><a href="#maxElementsOnDisk-是" class="headerlink" title="maxElementsOnDisk 是"></a>maxElementsOnDisk 是</h4><h4 id="在磁盘上缓存的element的最大数目，若是-0-表示无"><a href="#在磁盘上缓存的element的最大数目，若是-0-表示无" class="headerlink" title="在磁盘上缓存的element的最大数目，若是 0 表示无"></a>在磁盘上缓存的element的最大数目，若是 0 表示无</h4><h4 id="穷大"><a href="#穷大" class="headerlink" title="穷大"></a>穷大</h4><h4 id="eternal-是"><a href="#eternal-是" class="headerlink" title="eternal 是"></a>eternal 是</h4><h4 id="设定缓存的elements是否永远不过期。-如果为"><a href="#设定缓存的elements是否永远不过期。-如果为" class="headerlink" title="设定缓存的elements是否永远不过期。 如果为"></a>设定缓存的elements是否永远不过期。 如果为</h4><h4 id="true，则缓存的数据始终有效，-如果为false那么还"><a href="#true，则缓存的数据始终有效，-如果为false那么还" class="headerlink" title="true，则缓存的数据始终有效， 如果为false那么还"></a>true，则缓存的数据始终有效， 如果为false那么还</h4><h4 id="要根据timeToIdleSeconds、timeToLiveSeconds"><a href="#要根据timeToIdleSeconds、timeToLiveSeconds" class="headerlink" title="要根据timeToIdleSeconds、timeToLiveSeconds"></a>要根据timeToIdleSeconds、timeToLiveSeconds</h4><h4 id="判断"><a href="#判断" class="headerlink" title="判断"></a>判断</h4><h4 id="overflowToDisk-是"><a href="#overflowToDisk-是" class="headerlink" title="overflowToDisk 是"></a>overflowToDisk 是</h4><h4 id="设定当内存缓存溢出的时候是否将过期的element"><a href="#设定当内存缓存溢出的时候是否将过期的element" class="headerlink" title="设定当内存缓存溢出的时候是否将过期的element"></a>设定当内存缓存溢出的时候是否将过期的element</h4><h4 id="缓存到磁盘上"><a href="#缓存到磁盘上" class="headerlink" title="缓存到磁盘上"></a>缓存到磁盘上</h4><h4 id="timeToIdleSeconds-否"><a href="#timeToIdleSeconds-否" class="headerlink" title="timeToIdleSeconds 否"></a>timeToIdleSeconds 否</h4><h4 id="当缓存在EhCache中的数据前后两次访问的时间超"><a href="#当缓存在EhCache中的数据前后两次访问的时间超" class="headerlink" title="当缓存在EhCache中的数据前后两次访问的时间超"></a>当缓存在EhCache中的数据前后两次访问的时间超</h4><h4 id="过timeToIdleSeconds的属性取值时，-这些数据便"><a href="#过timeToIdleSeconds的属性取值时，-这些数据便" class="headerlink" title="过timeToIdleSeconds的属性取值时， 这些数据便"></a>过timeToIdleSeconds的属性取值时， 这些数据便</h4><h4 id="会删除，默认值是0-也就是可闲置时间无穷大"><a href="#会删除，默认值是0-也就是可闲置时间无穷大" class="headerlink" title="会删除，默认值是0,也就是可闲置时间无穷大"></a>会删除，默认值是0,也就是可闲置时间无穷大</h4><h4 id="timeToLiveSeconds-否"><a href="#timeToLiveSeconds-否" class="headerlink" title="timeToLiveSeconds 否"></a>timeToLiveSeconds 否</h4><h4 id="缓存element的有效生命期，默认是0-也就是"><a href="#缓存element的有效生命期，默认是0-也就是" class="headerlink" title="缓存element的有效生命期，默认是0.,也就是"></a>缓存element的有效生命期，默认是0.,也就是</h4><h4 id="element存活时间无穷大"><a href="#element存活时间无穷大" class="headerlink" title="element存活时间无穷大"></a>element存活时间无穷大</h4><h4 id="diskSpoolBufferSizeMB-否"><a href="#diskSpoolBufferSizeMB-否" class="headerlink" title="diskSpoolBufferSizeMB 否"></a>diskSpoolBufferSizeMB 否</h4><h4 id="DiskStore-磁盘缓存-的缓存区大小。默认是"><a href="#DiskStore-磁盘缓存-的缓存区大小。默认是" class="headerlink" title="DiskStore(磁盘缓存)的缓存区大小。默认是"></a>DiskStore(磁盘缓存)的缓存区大小。默认是</h4><h4 id="30MB。每个Cache都应该有自己的一个缓冲区"><a href="#30MB。每个Cache都应该有自己的一个缓冲区" class="headerlink" title="30MB。每个Cache都应该有自己的一个缓冲区"></a>30MB。每个Cache都应该有自己的一个缓冲区</h4><h4 id="diskPersistent-否"><a href="#diskPersistent-否" class="headerlink" title="diskPersistent 否"></a>diskPersistent 否</h4><h4 id="在VM重启的时候是否启用磁盘保存EhCache中的数"><a href="#在VM重启的时候是否启用磁盘保存EhCache中的数" class="headerlink" title="在VM重启的时候是否启用磁盘保存EhCache中的数"></a>在VM重启的时候是否启用磁盘保存EhCache中的数</h4><h4 id="据，默认是false。"><a href="#据，默认是false。" class="headerlink" title="据，默认是false。"></a>据，默认是false。</h4><h4 id="diskExpiryThreadIntervalSeconds-否"><a href="#diskExpiryThreadIntervalSeconds-否" class="headerlink" title="diskExpiryThreadIntervalSeconds 否"></a>diskExpiryThreadIntervalSeconds 否</h4><h4 id="磁盘缓存的清理线程运行间隔，默认是-120-秒。每"><a href="#磁盘缓存的清理线程运行间隔，默认是-120-秒。每" class="headerlink" title="磁盘缓存的清理线程运行间隔，默认是 120 秒。每"></a>磁盘缓存的清理线程运行间隔，默认是 120 秒。每</h4><h4 id="个120s，-相应的线程会进行一次EhCache中数据的"><a href="#个120s，-相应的线程会进行一次EhCache中数据的" class="headerlink" title="个120s， 相应的线程会进行一次EhCache中数据的"></a>个120s， 相应的线程会进行一次EhCache中数据的</h4><h4 id="清理工作"><a href="#清理工作" class="headerlink" title="清理工作"></a>清理工作</h4><h4 id="memoryStoreEvictionPolicy-否"><a href="#memoryStoreEvictionPolicy-否" class="headerlink" title="memoryStoreEvictionPolicy 否"></a>memoryStoreEvictionPolicy 否</h4><h4 id="当内存缓存达到最大，有新的element加入的时"><a href="#当内存缓存达到最大，有新的element加入的时" class="headerlink" title="当内存缓存达到最大，有新的element加入的时"></a>当内存缓存达到最大，有新的element加入的时</h4><h4 id="候，-移除缓存中element的策略。-默认是LRU（最"><a href="#候，-移除缓存中element的策略。-默认是LRU（最" class="headerlink" title="候， 移除缓存中element的策略。 默认是LRU（最"></a>候， 移除缓存中element的策略。 默认是LRU（最</h4><h4 id="近最少使用），可选的有LFU（最不常使用）和"><a href="#近最少使用），可选的有LFU（最不常使用）和" class="headerlink" title="近最少使用），可选的有LFU（最不常使用）和"></a>近最少使用），可选的有LFU（最不常使用）和</h4><h4 id="FIFO（先进先出）"><a href="#FIFO（先进先出）" class="headerlink" title="FIFO（先进先出）"></a>FIFO（先进先出）</h4><h1 id="十一、MyBatis的逆向工程"><a href="#十一、MyBatis的逆向工程" class="headerlink" title="十一、MyBatis的逆向工程"></a>十一、MyBatis的逆向工程</h1><h4 id="正向工程：先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程"><a href="#正向工程：先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程" class="headerlink" title="正向工程：先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程"></a>正向工程：先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程</h4><h4 id="的。"><a href="#的。" class="headerlink" title="的。"></a>的。</h4><h4 id="逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源："><a href="#逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源：" class="headerlink" title="逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源："></a>逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源：</h4><h4 id="Java实体类"><a href="#Java实体类" class="headerlink" title="Java实体类"></a>Java实体类</h4><h4 id="Mapper接口"><a href="#Mapper接口" class="headerlink" title="Mapper接口"></a>Mapper接口</h4><h4 id="Mapper映射文件"><a href="#Mapper映射文件" class="headerlink" title="Mapper映射文件"></a>Mapper映射文件</h4><h2 id="1-、创建逆向工程的步骤"><a href="#1-、创建逆向工程的步骤" class="headerlink" title="1 、创建逆向工程的步骤"></a>1 、创建逆向工程的步骤</h2><h2 id="a-添加依赖和插件"><a href="#a-添加依赖和插件" class="headerlink" title="a&gt;添加依赖和插件"></a>a&gt;添加依赖和插件</h2><h3 id="b-创建MyBatis的核心配置文件"><a href="#b-创建MyBatis的核心配置文件" class="headerlink" title="b&gt;创建MyBatis的核心配置文件"></a>b&gt;创建MyBatis的核心配置文件</h3><h3 id="c-创建逆向工程的配置文件"><a href="#c-创建逆向工程的配置文件" class="headerlink" title="c&gt;创建逆向工程的配置文件"></a>c&gt;创建逆向工程的配置文件</h3><h4 id="文件名必须是：generatorConfig-xml"><a href="#文件名必须是：generatorConfig-xml" class="headerlink" title="文件名必须是：generatorConfig.xml"></a>文件名必须是：generatorConfig.xml</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 依赖MyBatis核心包 --&gt;</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;3.5.7&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 控制Maven在构建过程中相关配置 --&gt;</span><br><span class="line">&lt;build&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-23"><a href="#-23" class="headerlink" title=""></a><!-- 构建过程中用到的插件 --></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugins&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-24"><a href="#-24" class="headerlink" title=""></a><!-- 具体插件，逆向工程的操作是以构建过程中插件形式出现的 --></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">&lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.3.0&lt;/version&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-25"><a href="#-25" class="headerlink" title=""></a><!-- 插件的依赖 --></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-26"><a href="#-26" class="headerlink" title=""></a><!-- 逆向工程的核心依赖 --></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.3.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h5 id="-27"><a href="#-27" class="headerlink" title=""></a><!-- 数据库连接池 --></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.mchange&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;c3p0&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;0.9.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- MySQL驱动 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;5.1.8&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br><span class="line">&lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE generatorConfiguration</span><br></pre></td></tr></table></figure>

<h3 id="d-执行MBG插件的generate目标"><a href="#d-执行MBG插件的generate目标" class="headerlink" title="d&gt;执行MBG插件的generate目标"></a>d&gt;执行MBG插件的generate目标</h3><h4 id="效果："><a href="#效果：" class="headerlink" title="效果："></a>效果：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;</span><br><span class="line">&lt;generatorConfiguration&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">targetRuntime: 执行生成的逆向工程的版本</span><br><span class="line">MyBatis3Simple: 生成基本的CRUD（清新简洁版）</span><br><span class="line">MyBatis3: 生成带条件的CRUD（奢华尊享版）</span><br><span class="line">--&gt;</span><br><span class="line">&lt;context id=&quot;DB2Tables&quot; targetRuntime=&quot;MyBatis3Simple&quot;&gt;</span><br><span class="line">&lt;!-- 数据库的连接信息 --&gt;</span><br><span class="line">&lt;jdbcConnection driverClass=&quot;com.mysql.jdbc.Driver&quot;</span><br><span class="line">connectionURL=&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span><br><span class="line">userId=&quot;root&quot;</span><br><span class="line">password=&quot;123456&quot;&gt;</span><br><span class="line">&lt;/jdbcConnection&gt;</span><br><span class="line">&lt;!-- javaBean的生成策略--&gt;</span><br><span class="line">&lt;javaModelGenerator targetPackage=&quot;com.atguigu.mybatis.bean&quot;</span><br><span class="line">targetProject=&quot;.\src\main\java&quot;&gt;</span><br><span class="line">&lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">&lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">&lt;/javaModelGenerator&gt;</span><br><span class="line">&lt;!-- SQL映射文件的生成策略 --&gt;</span><br><span class="line">&lt;sqlMapGenerator targetPackage=&quot;com.atguigu.mybatis.mapper&quot;</span><br><span class="line">targetProject=&quot;.\src\main\resources&quot;&gt;</span><br><span class="line">&lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">&lt;/sqlMapGenerator&gt;</span><br><span class="line">&lt;!-- Mapper接口的生成策略 --&gt;</span><br><span class="line">&lt;javaClientGenerator type=&quot;XMLMAPPER&quot;</span><br><span class="line">targetPackage=&quot;com.atguigu.mybatis.mapper&quot; targetProject=&quot;.\src\main\java&quot;&gt;</span><br><span class="line">&lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">&lt;/javaClientGenerator&gt;</span><br><span class="line">&lt;!-- 逆向分析的表 --&gt;</span><br><span class="line">&lt;!-- tableName设置为*号，可以对应所有表，此时不写domainObjectName --&gt;</span><br><span class="line">&lt;!-- domainObjectName属性指定生成出来的实体类的类名 --&gt;</span><br><span class="line">&lt;table tableName=&quot;t_emp&quot; domainObjectName=&quot;Emp&quot;/&gt;</span><br><span class="line">&lt;table tableName=&quot;t_dept&quot; domainObjectName=&quot;Dept&quot;/&gt;</span><br><span class="line">&lt;/context&gt;</span><br><span class="line">&lt;/generatorConfiguration&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-、QBC查询"><a href="#2-、QBC查询" class="headerlink" title="2 、QBC查询"></a>2 、QBC查询</h2><h1 id="十二、分页插件"><a href="#十二、分页插件" class="headerlink" title="十二、分页插件"></a>十二、分页插件</h1><h2 id="1-、分页插件使用步骤"><a href="#1-、分页插件使用步骤" class="headerlink" title="1 、分页插件使用步骤"></a>1 、分页插件使用步骤</h2><h2 id="a-添加依赖-1"><a href="#a-添加依赖-1" class="headerlink" title="a&gt;添加依赖"></a>a&gt;添加依赖</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testMBG() throws IOException &#123;</span><br><span class="line">InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">SqlSession sqlSession = new</span><br><span class="line">SqlSessionFactoryBuilder().build(is).openSession(true);</span><br><span class="line">EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">EmpExample empExample = new EmpExample();</span><br><span class="line">//创建条件对象，通过andXXX方法为SQL添加查询添加，每个条件之间是and关系</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">empExample.createCriteria().andEnameLike(&quot;a&quot;).andAgeGreaterThan( 20 ).andDidIsNot</span><br><span class="line">Null();</span><br><span class="line">//将之前添加的条件通过or拼接其他条件</span><br><span class="line">empExample.or().andSexEqualTo(&quot;男&quot;);</span><br><span class="line">List&lt;Emp&gt; list = mapper.selectByExample(empExample);</span><br><span class="line">for (Emp emp : list) &#123;</span><br><span class="line">System.out.println(emp);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="b-配置分页插件"><a href="#b-配置分页插件" class="headerlink" title="b&gt;配置分页插件"></a>b&gt;配置分页插件</h3><h4 id="在MyBatis的核心配置文件中配置插件"><a href="#在MyBatis的核心配置文件中配置插件" class="headerlink" title="在MyBatis的核心配置文件中配置插件"></a>在MyBatis的核心配置文件中配置插件</h4><h2 id="2-、分页插件的使用"><a href="#2-、分页插件的使用" class="headerlink" title="2 、分页插件的使用"></a>2 、分页插件的使用</h2><h4 id="a-在查询功能之前使用PageHelper-startPage-int-pageNum-int-pageSize-开启分页功能"><a href="#a-在查询功能之前使用PageHelper-startPage-int-pageNum-int-pageSize-开启分页功能" class="headerlink" title="a&gt;在查询功能之前使用PageHelper.startPage(int pageNum, int pageSize)开启分页功能"></a>a&gt;在查询功能之前使用PageHelper.startPage(int pageNum, int pageSize)开启分页功能</h4><h4 id="pageNum：当前页的页码"><a href="#pageNum：当前页的页码" class="headerlink" title="pageNum：当前页的页码"></a>pageNum：当前页的页码</h4><h4 id="pageSize：每页显示的条数"><a href="#pageSize：每页显示的条数" class="headerlink" title="pageSize：每页显示的条数"></a>pageSize：每页显示的条数</h4><h4 id="b-在查询获取list集合之后，使用PageInfo-pageInfo-new-PageInfo-List-list-int"><a href="#b-在查询获取list集合之后，使用PageInfo-pageInfo-new-PageInfo-List-list-int" class="headerlink" title="b&gt;在查询获取list集合之后，使用PageInfo pageInfo &#x3D; new PageInfo&lt;&gt;(List list, int"></a>b&gt;在查询获取list集合之后，使用PageInfo<T> pageInfo &#x3D; new PageInfo&lt;&gt;(List<T> list, int</h4><h4 id="navigatePages-获取分页相关数据"><a href="#navigatePages-获取分页相关数据" class="headerlink" title="navigatePages)获取分页相关数据"></a>navigatePages)获取分页相关数据</h4><h4 id="list：分页之后的数据"><a href="#list：分页之后的数据" class="headerlink" title="list：分页之后的数据"></a>list：分页之后的数据</h4><h4 id="navigatePages：导航分页的页码数"><a href="#navigatePages：导航分页的页码数" class="headerlink" title="navigatePages：导航分页的页码数"></a>navigatePages：导航分页的页码数</h4><h4 id="c-分页相关数据"><a href="#c-分页相关数据" class="headerlink" title="c&gt;分页相关数据"></a>c&gt;分页相关数据</h4><h4 id="PageInfo"><a href="#PageInfo" class="headerlink" title="PageInfo{"></a>PageInfo{</h4><h4 id="pageNum-8-pageSize-4-size-2-startRow-29-endRow-30-total-30-pages-8"><a href="#pageNum-8-pageSize-4-size-2-startRow-29-endRow-30-total-30-pages-8" class="headerlink" title="pageNum&#x3D;8, pageSize&#x3D;4, size&#x3D;2, startRow&#x3D;29, endRow&#x3D;30, total&#x3D;30, pages&#x3D;8,"></a>pageNum&#x3D;8, pageSize&#x3D;4, size&#x3D;2, startRow&#x3D;29, endRow&#x3D;30, total&#x3D;30, pages&#x3D;8,</h4><h4 id="list-Page-count-true-pageNum-8-pageSize-4-startRow-28-endRow-32-total-30"><a href="#list-Page-count-true-pageNum-8-pageSize-4-startRow-28-endRow-32-total-30" class="headerlink" title="list&#x3D;Page{count&#x3D;true, pageNum&#x3D;8, pageSize&#x3D;4, startRow&#x3D;28, endRow&#x3D;32, total&#x3D;30,"></a>list&#x3D;Page{count&#x3D;true, pageNum&#x3D;8, pageSize&#x3D;4, startRow&#x3D;28, endRow&#x3D;32, total&#x3D;30,</h4><h4 id="pages-8-reasonable-false-pageSizeZero-false"><a href="#pages-8-reasonable-false-pageSizeZero-false" class="headerlink" title="pages&#x3D;8, reasonable&#x3D;false, pageSizeZero&#x3D;false},"></a>pages&#x3D;8, reasonable&#x3D;false, pageSizeZero&#x3D;false},</h4><h4 id="prePage-7-nextPage-0-isFirstPage-false-isLastPage-true-hasPreviousPage-true"><a href="#prePage-7-nextPage-0-isFirstPage-false-isLastPage-true-hasPreviousPage-true" class="headerlink" title="prePage&#x3D;7, nextPage&#x3D;0, isFirstPage&#x3D;false, isLastPage&#x3D;true, hasPreviousPage&#x3D;true,"></a>prePage&#x3D;7, nextPage&#x3D;0, isFirstPage&#x3D;false, isLastPage&#x3D;true, hasPreviousPage&#x3D;true,</h4><h4 id="hasNextPage-false-navigatePages-5-navigateFirstPage4-navigateLastPage8"><a href="#hasNextPage-false-navigatePages-5-navigateFirstPage4-navigateLastPage8" class="headerlink" title="hasNextPage&#x3D;false, navigatePages&#x3D;5, navigateFirstPage4, navigateLastPage8,"></a>hasNextPage&#x3D;false, navigatePages&#x3D;5, navigateFirstPage4, navigateLastPage8,</h4><h4 id="navigatepageNums-4-5-6-7-8"><a href="#navigatepageNums-4-5-6-7-8" class="headerlink" title="navigatepageNums&#x3D;[4, 5, 6, 7, 8]"></a>navigatepageNums&#x3D;[4, 5, 6, 7, 8]</h4><h4 id="-28"><a href="#-28" class="headerlink" title="}"></a>}</h4><h4 id="常用数据："><a href="#常用数据：" class="headerlink" title="常用数据："></a>常用数据：</h4><h4 id="pageNum：当前页的页码-1"><a href="#pageNum：当前页的页码-1" class="headerlink" title="pageNum：当前页的页码"></a>pageNum：当前页的页码</h4><h4 id="pageSize：每页显示的条数-1"><a href="#pageSize：每页显示的条数-1" class="headerlink" title="pageSize：每页显示的条数"></a>pageSize：每页显示的条数</h4><h4 id="size：当前页显示的真实条数"><a href="#size：当前页显示的真实条数" class="headerlink" title="size：当前页显示的真实条数"></a>size：当前页显示的真实条数</h4><h4 id="total：总记录数"><a href="#total：总记录数" class="headerlink" title="total：总记录数"></a>total：总记录数</h4><h4 id="pages：总页数"><a href="#pages：总页数" class="headerlink" title="pages：总页数"></a>pages：总页数</h4><h4 id="prePage：上一页的页码"><a href="#prePage：上一页的页码" class="headerlink" title="prePage：上一页的页码"></a>prePage：上一页的页码</h4><h4 id="nextPage：下一页的页码"><a href="#nextPage：下一页的页码" class="headerlink" title="nextPage：下一页的页码"></a>nextPage：下一页的页码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;pagehelper&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;5.2.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugins&gt;</span><br><span class="line">&lt;!--设置分页插件--&gt;</span><br><span class="line">&lt;plugin interceptor=&quot;com.github.pagehelper.PageInterceptor&quot;&gt;&lt;/plugin&gt;</span><br><span class="line">&lt;/plugins&gt;</span><br></pre></td></tr></table></figure>

<h4 id="isFirstPage-isLastPage：是否为第一页-最后一页"><a href="#isFirstPage-isLastPage：是否为第一页-最后一页" class="headerlink" title="isFirstPage&#x2F;isLastPage：是否为第一页&#x2F;最后一页"></a>isFirstPage&#x2F;isLastPage：是否为第一页&#x2F;最后一页</h4><h4 id="hasPreviousPage-hasNextPage：是否存在上一页-下一页"><a href="#hasPreviousPage-hasNextPage：是否存在上一页-下一页" class="headerlink" title="hasPreviousPage&#x2F;hasNextPage：是否存在上一页&#x2F;下一页"></a>hasPreviousPage&#x2F;hasNextPage：是否存在上一页&#x2F;下一页</h4><h4 id="navigatePages：导航分页的页码数-1"><a href="#navigatePages：导航分页的页码数-1" class="headerlink" title="navigatePages：导航分页的页码数"></a>navigatePages：导航分页的页码数</h4><h4 id="navigatepageNums：导航分页的页码，-1-2-3-4-5"><a href="#navigatepageNums：导航分页的页码，-1-2-3-4-5" class="headerlink" title="navigatepageNums：导航分页的页码，[1,2,3,4,5]"></a>navigatepageNums：导航分页的页码，[1,2,3,4,5]</h4> 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          Donate
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>Copyright： </strong>
          
          Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://coffeerin.github.io/2024/05/30/MyBatis%E7%AC%94%E8%AE%B0/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2024/06/24/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            前端面试题
          
        </div>
      </a>
    
    
      <a href="/2024/05/30/MyBatis%E6%8F%92%E5%85%A5%E4%B8%AD%E6%96%87%E6%97%B6%E4%B9%B1%E7%A0%81/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">MyBatis插入中文时乱码</div>
      </a>
    
  </nav>

  
   
  
    
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2022-2024
        <i class="ri-heart-fill heart_icon"></i> CoffeeLin
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/coffee.svg" alt="CoffeeLin"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/photos">相册</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/clock">时钟</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->
 
<script src="/js/dz.js"></script>
 
<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>